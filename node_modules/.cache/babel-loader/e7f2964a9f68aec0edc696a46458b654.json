{"ast":null,"code":"var _jsxFileName = \"/home/fillipecorreia/Desktop/LabeFood/Vaughan-labe-food5/src/components/Global/GlobalState.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { GlobalStateContext } from \"./GlobalStateContext\";\nimport { BASE_URL } from \"../../constants/urls\";\nimport axios from \"axios\";\nexport const GlobalState = props => {\n  const [restaurants, setRestaurants] = useState([]);\n  const [products, setProducts] = useState([]);\n  const [openModal, setOpenModal] = useState(false);\n  const [cart, setCart] = useState([]);\n  useEffect(() => {\n    pegarRestaurants();\n  }, []);\n  useEffect(() => {\n    pegarProducts();\n  }, [restaurants]);\n\n  const pegarProducts = () => {\n    const newList = [];\n    restaurants.forEach(p => {\n      axios.get(`${BASE_URL}/restaurants/${p.id}`, {\n        headers: {\n          Auth: \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IkEwMDVtSEJmeVNrdDdPTjBITGFwIiwibmFtZSI6IkFzdHJvZGV2IiwiZW1haWwiOiJhc3Ryb2RldkBmdXR1cmU0LmNvbSIsImNwZiI6IjMzMy44ODguNjY2LTQ0IiwiaGFzQWRkcmVzcyI6dHJ1ZSwiYWRkcmVzcyI6IkJhbmFuaW5oYSwgOTgsIDY1IC0gQmFuYW5pbmhhIiwiaWF0IjoxNjQ3MjgxODYwfQ.v_AQdOG33NHtcXjizcAM6QR0qj-SCrtHx5VT0xM2XcE\"\n        }\n      }).then(res => {\n        newList.push(res.data.restaurant.products);\n\n        if (newList.length === 10) {\n          const orderedList = newList.sort((a, b) => {\n            return a.id - b.id;\n          });\n          setProducts(orderedList);\n        }\n      }).catch(error => console.log(error.message));\n    });\n  };\n\n  const pegarRestaurants = () => {\n    axios.get(`${BASE_URL}/restaurants`, {\n      headers: {\n        Auth: \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IkEwMDVtSEJmeVNrdDdPTjBITGFwIiwibmFtZSI6IkFzdHJvZGV2IiwiZW1haWwiOiJhc3Ryb2RldkBmdXR1cmU0LmNvbSIsImNwZiI6IjMzMy44ODguNjY2LTQ0IiwiaGFzQWRkcmVzcyI6dHJ1ZSwiYWRkcmVzcyI6IkJhbmFuaW5oYSwgOTgsIDY1IC0gQmFuYW5pbmhhIiwiaWF0IjoxNjQ3MjgxODYwfQ.v_AQdOG33NHtcXjizcAM6QR0qj-SCrtHx5VT0xM2XcE\"\n      }\n    }).then(({\n      data\n    }) => {\n      const newRestaurants = [];\n      data.restaurants.forEach(p => newRestaurants.push(p));\n      setRestaurants(oldRestaurants => [...oldRestaurants, ...newRestaurants]);\n    });\n  };\n\n  const states = {\n    openModal,\n    products,\n    restaurants,\n    cart\n  };\n  const sets = {\n    setOpenModal,\n    setProducts,\n    setRestaurants,\n    setCart\n  };\n  return /*#__PURE__*/React.createElement(GlobalStateContext.Provider, {\n    value: {\n      states,\n      sets\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 5\n    }\n  }, props.children);\n};\nexport default GlobalState; // address:\n// category:\n// deliveryTime:\n// description:\n// id:\n// logoUrl:\n// name:\n// shipping:","map":{"version":3,"sources":["/home/fillipecorreia/Desktop/LabeFood/Vaughan-labe-food5/src/components/Global/GlobalState.js"],"names":["React","useEffect","useState","GlobalStateContext","BASE_URL","axios","GlobalState","props","restaurants","setRestaurants","products","setProducts","openModal","setOpenModal","cart","setCart","pegarRestaurants","pegarProducts","newList","forEach","p","get","id","headers","Auth","then","res","push","data","restaurant","length","orderedList","sort","a","b","catch","error","console","log","message","newRestaurants","oldRestaurants","states","sets","children"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { GlobalStateContext } from \"./GlobalStateContext\";\nimport { BASE_URL } from \"../../constants/urls\";\nimport axios from \"axios\";\n\nexport const GlobalState = (props) => {\n  const [restaurants, setRestaurants] = useState([]);\n  const [products, setProducts] = useState([]);\n  const [openModal, setOpenModal] = useState(false)\n  const [cart, setCart] = useState([])\n\n  useEffect(() => {\n    pegarRestaurants();\n  }, []);\n  useEffect(() => {\n    pegarProducts();\n  }, [restaurants]);\n\n  const pegarProducts = () => {\n    const newList = [];\n    restaurants.forEach((p) => {\n      axios\n        .get(`${BASE_URL}/restaurants/${p.id}`, {\n          headers: {\n            Auth: \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IkEwMDVtSEJmeVNrdDdPTjBITGFwIiwibmFtZSI6IkFzdHJvZGV2IiwiZW1haWwiOiJhc3Ryb2RldkBmdXR1cmU0LmNvbSIsImNwZiI6IjMzMy44ODguNjY2LTQ0IiwiaGFzQWRkcmVzcyI6dHJ1ZSwiYWRkcmVzcyI6IkJhbmFuaW5oYSwgOTgsIDY1IC0gQmFuYW5pbmhhIiwiaWF0IjoxNjQ3MjgxODYwfQ.v_AQdOG33NHtcXjizcAM6QR0qj-SCrtHx5VT0xM2XcE\",\n          },\n        })\n        .then((res) => {\n          newList.push(res.data.restaurant.products);\n          if (newList.length === 10) {\n            const orderedList = newList.sort((a, b) => {\n              return a.id - b.id;\n            });\n            setProducts(orderedList);\n          }\n        })\n        .catch((error) => console.log(error.message));\n    });\n  };\n\n  const pegarRestaurants = () => {\n    axios\n      .get(`${BASE_URL}/restaurants`, {\n        headers: {\n          Auth: \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IkEwMDVtSEJmeVNrdDdPTjBITGFwIiwibmFtZSI6IkFzdHJvZGV2IiwiZW1haWwiOiJhc3Ryb2RldkBmdXR1cmU0LmNvbSIsImNwZiI6IjMzMy44ODguNjY2LTQ0IiwiaGFzQWRkcmVzcyI6dHJ1ZSwiYWRkcmVzcyI6IkJhbmFuaW5oYSwgOTgsIDY1IC0gQmFuYW5pbmhhIiwiaWF0IjoxNjQ3MjgxODYwfQ.v_AQdOG33NHtcXjizcAM6QR0qj-SCrtHx5VT0xM2XcE\",\n        },\n      })\n      .then(({ data }) => {\n        const newRestaurants = [];\n        data.restaurants.forEach((p) => newRestaurants.push(p));\n        setRestaurants((oldRestaurants) => [\n          ...oldRestaurants,\n          ...newRestaurants,\n        ]);\n      });\n  };\n\n  const states = {openModal, products, restaurants, cart}\n  const sets = {setOpenModal, setProducts, setRestaurants, setCart}\n\n  return (\n    <GlobalStateContext.Provider value={{ states, sets }}>\n      {props.children}\n    </GlobalStateContext.Provider>\n  );\n};\n\nexport default GlobalState;\n// address:\n// category:\n// deliveryTime:\n// description:\n// id:\n// logoUrl:\n// name:\n// shipping:\n"]},"metadata":{},"sourceType":"module"}