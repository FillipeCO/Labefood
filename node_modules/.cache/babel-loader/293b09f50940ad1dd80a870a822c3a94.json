{"ast":null,"code":"var _jsxFileName = \"/home/fillipecorreia/Desktop/LabeFood/Vaughan-labe-food5/src/pages/restaurantpage/RestaurantPage.js\";\nimport React, { useState, useEffect } from \"react\";\nimport CardFood from \"../../components/CardFood/CardFood\";\nimport ModalQuantityFood from \"../../components/ModalQuantityFood/ModalQuantityFood\";\nimport { BASE_URL } from \"../../constants/urls\";\nimport { useRequestData } from \"../../hooks/useRequestData\";\nimport { useParams } from \"react-router-dom\"; //import {useProtectedPage} from \"../../hooks/useProtectedPage\"\n\nimport { GlobalStateContext } from \"../../components/Global/GlobalStateContext\";\nimport { useContext } from \"react\";\nimport Footer from \"../../components/Footer/Footer\";\nimport CardRestaurant from \"../../components/CardRestaurant/CardRestaurant\";\nim;\nconst Badge = styled.div`\ndisplay:flex;\nalign-self:flex-end;\nbackground-color: #8E8E93;\ncolor: #fff;\npadding: 0.5rem;\nborder-radius: 50%;\n`;\n\nconst RestaurantPage = () => {\n  const [quantityProduct, setQuantityProduct] = useState(0);\n  const [productSelected, setProdutcSelected] = useState({});\n  const [showBadge, setShowBadge] = useState(false);\n  const {\n    states,\n    sets\n  } = useContext(GlobalStateContext);\n  const pathParams = useParams();\n  const [foods, isLoadingFoods, errorFoods] = useRequestData(`${BASE_URL}/restaurants/${pathParams.id}`); // useProtectedPage();\n\n  useEffect(() => {\n    sets.setOpenModal(false);\n  }, []);\n\n  const onChangeQuantity = event => {\n    setQuantityProduct(event.target.value);\n  };\n\n  const AddProductToCart = prod => {\n    setProdutcSelected(prod);\n    sets.setOpenModal(true);\n  };\n\n  const addCart = (product, quantity) => {\n    const foodItem = { ...product,\n      quantity: quantity\n    };\n    const newCart = [...states.cart, foodItem];\n    console.log(\"foodITEM\", foodItem);\n    sets.setCart(newCart);\n    sets.setOpenModal(false);\n    setShowBadge(true);\n    console.log(\"EXECUTANDO ADD CART\");\n  };\n\n  const listFoods = foods && foods.restaurant && foods.restaurant.products.map(product => {\n    const quantityOnCart = states.cart && states.cart.map(cart => {\n      if (cart.id === product.id) {\n        return cart.quantity;\n      }\n    });\n    return /*#__PURE__*/React.createElement(CardFood, {\n      prodSelected: productSelected,\n      product: product,\n      key: product.id,\n      restaurantId: pathParams.id,\n      quantity: quantityProduct,\n      senQuantity: quantityOnCart,\n      addCart: addCart,\n      onChangeQuantity: onChangeQuantity,\n      onClickAdd: () => AddProductToCart(product),\n      showBadge: showBadge,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }\n    });\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }\n  }, \"Restaurantes\"), foods && foods.restaurant && /*#__PURE__*/React.createElement(CardRestaurant, {\n    image: foods.restaurant.logoUrl,\n    title: foods.restaurant.name,\n    category: foods.restaurant.category,\n    time: foods.restaurant.deliveryTime,\n    shipping: foods.restaurant.shipping,\n    address: foods.restaurant.address,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }\n  }), isLoadingFoods && /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 26\n    }\n  }, \"Carregando\"), !isLoadingFoods && errorFoods && /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 41\n    }\n  }, \"Erro\"), !isLoadingFoods && foods && listFoods, !isLoadingFoods && foods && listFoods.length === 0 && /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 9\n    }\n  }, \"N\\xE3o h\\xE1 nenhuma postagem\"), /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default RestaurantPage;","map":{"version":3,"sources":["/home/fillipecorreia/Desktop/LabeFood/Vaughan-labe-food5/src/pages/restaurantpage/RestaurantPage.js"],"names":["React","useState","useEffect","CardFood","ModalQuantityFood","BASE_URL","useRequestData","useParams","GlobalStateContext","useContext","Footer","CardRestaurant","im","Badge","styled","div","RestaurantPage","quantityProduct","setQuantityProduct","productSelected","setProdutcSelected","showBadge","setShowBadge","states","sets","pathParams","foods","isLoadingFoods","errorFoods","id","setOpenModal","onChangeQuantity","event","target","value","AddProductToCart","prod","addCart","product","quantity","foodItem","newCart","cart","console","log","setCart","listFoods","restaurant","products","map","quantityOnCart","logoUrl","name","category","deliveryTime","shipping","address","length"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport CardFood from \"../../components/CardFood/CardFood\";\nimport ModalQuantityFood from \"../../components/ModalQuantityFood/ModalQuantityFood\";\nimport { BASE_URL } from \"../../constants/urls\";\nimport { useRequestData } from \"../../hooks/useRequestData\";\nimport { useParams } from \"react-router-dom\";\n//import {useProtectedPage} from \"../../hooks/useProtectedPage\"\nimport { GlobalStateContext } from \"../../components/Global/GlobalStateContext\";\nimport { useContext } from \"react\";\nimport Footer from \"../../components/Footer/Footer\";\nimport CardRestaurant from \"../../components/CardRestaurant/CardRestaurant\";\nim\n\nconst Badge = styled.div`\ndisplay:flex;\nalign-self:flex-end;\nbackground-color: #8E8E93;\ncolor: #fff;\npadding: 0.5rem;\nborder-radius: 50%;\n`\n\nconst RestaurantPage = () => {\n  const [quantityProduct , setQuantityProduct] = useState(0)\n  const [productSelected, setProdutcSelected] = useState({})\n  const [showBadge, setShowBadge] = useState(false);\n  \n  const { states, sets } = useContext(GlobalStateContext);\n  const pathParams = useParams();\n  const [foods, isLoadingFoods, errorFoods] = useRequestData(\n    `${BASE_URL}/restaurants/${pathParams.id}`\n  );\n  // useProtectedPage();\n\n  useEffect(() => {\n    sets.setOpenModal(false)\n  }, [])\n\n  const  onChangeQuantity = (event) => {\n    setQuantityProduct(event.target.value)\n  }\n\n  const AddProductToCart = (prod) => {\n    setProdutcSelected(prod)\n    sets.setOpenModal(true);\n  };\n\n  const addCart = (\n    product, quantity\n    \n  ) => {\n    const foodItem = {...product, quantity:quantity,\n      \n    }\n\n    const newCart = [...states.cart, foodItem]\n    console.log(\"foodITEM\", foodItem)\n    sets.setCart(newCart)\n    sets.setOpenModal(false)\n    setShowBadge(true)\n    console.log(\"EXECUTANDO ADD CART\")\n  };\n\n \n\n\n  const listFoods =\n    foods &&\n    foods.restaurant &&\n    foods.restaurant.products.map(\n      (product) => {\n\n        const quantityOnCart = states.cart && states.cart.map((cart)=>{\n          if(cart.id === product.id){\n            return cart.quantity\n          }\n        })\n\n        return (\n          <CardFood\n            prodSelected={productSelected}\n            product={product}\n            key={product.id}\n            restaurantId={pathParams.id}\n            quantity={quantityProduct}\n            senQuantity={quantityOnCart}\n            addCart={addCart}\n            onChangeQuantity={onChangeQuantity}\n            onClickAdd={() => AddProductToCart(product)}\n            showBadge={showBadge}\n          />\n        );\n      }\n    );\n  return (\n    <div>\n      <h1>Restaurantes</h1>\n\n\n      {foods && foods.restaurant && (\n        <CardRestaurant\n          image={foods.restaurant.logoUrl}\n          title={foods.restaurant.name}\n          category={foods.restaurant.category}\n          time={foods.restaurant.deliveryTime}\n          shipping={foods.restaurant.shipping}\n          address={foods.restaurant.address}\n        />\n      )}\n\n      {isLoadingFoods && <p>Carregando</p>}\n      {!isLoadingFoods && errorFoods && <p>Erro</p>}\n      {!isLoadingFoods && foods && listFoods}\n      {!isLoadingFoods && foods && listFoods.length === 0 && (\n        <p>Não há nenhuma postagem</p>\n      )}\n      <Footer />\n    </div>\n  );\n};\n\nexport default RestaurantPage;\n"]},"metadata":{},"sourceType":"module"}