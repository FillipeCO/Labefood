{"ast":null,"code":"var _jsxFileName = \"/home/fillipecorreia/Desktop/LabeFood/Vaughan-labe-food5/src/pages/restaurantpage/RestaurantPage.js\";\nimport React, { useState, useEffect } from \"react\";\nimport CardFood from \"../../components/CardFood/CardFood\";\nimport ModalQuantityFood from \"../../components/ModalQuantityFood/ModalQuantityFood\";\nimport { BASE_URL } from \"../../constants/urls\";\nimport { useRequestData } from \"../../hooks/useRequestData\";\nimport { useParams } from \"react-router-dom\"; //import {useProtectedPage} from \"../../hooks/useProtectedPage\"\n\nimport { GlobalStateContext } from \"../../components/Global/GlobalStateContext\";\nimport { useContext } from \"react\";\nimport Footer from \"../../components/Footer/Footer\";\nimport CardRestaurant from \"../../components/CardRestaurant/CardRestaurant\";\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { CentralizeLoading } from './styled';\nimport styled from 'styled-components';\nimport Header from \"../../components/Header/Header\";\nconst Badge = styled.div`\ndisplay:flex;\nalign-items:center;\njustify-content:center;\nbackground-color: #E86E5A;\nposition: relative;\ntop: -40px;\nright: -180px;\ncolor: #fff;\npadding: 0.5rem;\nheight: 10px;\nwidth: 10px;\nborder-radius: 50%;\n`;\n\nconst RestaurantPage = () => {\n  const [quantityProduct, setQuantityProduct] = useState(0);\n  const [productSelected, setProdutcSelected] = useState({});\n  const [showBadge, setShowBadge] = useState(false);\n  const [btn, setBtn] = useState([]);\n  const [category, setCategory] = useState([]);\n  const {\n    states,\n    sets\n  } = useContext(GlobalStateContext);\n  const pathParams = useParams();\n  const [foods, isLoadingFoods, errorFoods] = useRequestData(`${BASE_URL}/restaurants/${pathParams.id}`); // useProtectedPage();\n\n  useEffect(() => {\n    sets.setOpenModal(false);\n  }, []);\n\n  const onChangeQuantity = event => {\n    setQuantityProduct(event.target.value);\n  };\n\n  const AddProductToCart = (prod, id) => {\n    setProdutcSelected(prod);\n    sets.setOpenModal(true);\n  };\n\n  const addCart = (product, quantity) => {\n    const foodItem = { ...product,\n      quantity: quantity,\n      btnValue: \"remover\",\n      idRestaurant: pathParams.id\n    };\n    const newCart = [...states.cart, foodItem];\n    sets.setCart(newCart);\n    sets.setOpenModal(false);\n    const foodItemBtn = { ...product,\n      quantity: quantity,\n      btnValue: \"remover\",\n      idRestaurant: pathParams.id\n    };\n    const newBtn = [...btn, foodItemBtn];\n    setBtn(newBtn);\n    sets.setOpenModal(false);\n    setShowBadge(true);\n  }; // const checkCategory = (products) => {\n  //   const newCategory = []\n  //  products.forEach(product => {\n  //   if(newCategory.includes(product.category) === false){\n  //     newCategory.push(product.category)\n  //   }\n  //  })\n  //   setCategory(newCategory)\n  //   console.log(category)\n  // }\n\n\n  const listFoods = foods && foods.restaurant && foods.restaurant.products.map(product => {\n    const quantityOnCart = states.cart && states.cart.map(cart => {\n      if (cart.id === product.id) {\n        return /*#__PURE__*/React.createElement(Badge, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 20\n          }\n        }, cart.quantity);\n      }\n    });\n    const changeBtnValue = states.cart && states.cart.map(cart => {\n      if (cart.id === product.id) {\n        return cart.btnValue;\n      }\n    });\n\n    const toRemove = () => {\n      const updateProductsInCart = states.cart && states.cart.map(item => {\n        if (item.id === product.id) {\n          //  return item.quantity = item.quantity -1\n          return { ...item,\n            quantity: item.quantity - 1\n          };\n        }\n\n        return item;\n      }).filter(item => {\n        return item.quantity > 0;\n      });\n      sets.setCart(updateProductsInCart);\n      console.log(\"REMOVI\", states.cart);\n    };\n\n    return /*#__PURE__*/React.createElement(CardFood, {\n      prodSelected: productSelected,\n      product: product,\n      key: product.id,\n      restaurantId: pathParams.id,\n      quantity: quantityProduct,\n      senQuantity: quantityOnCart,\n      addCart: addCart,\n      onChangeQuantity: onChangeQuantity,\n      onClickAdd: () => AddProductToCart(product, pathParams.id),\n      onClickRemove: toRemove,\n      sendBtnChange: changeBtnValue,\n      showBadge: showBadge,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 9\n      }\n    });\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 7\n    }\n  }), foods && foods.restaurant && /*#__PURE__*/React.createElement(CardRestaurant, {\n    image: foods.restaurant.logoUrl,\n    title: foods.restaurant.name,\n    category: foods.restaurant.category,\n    time: foods.restaurant.deliveryTime,\n    shipping: foods.restaurant.shipping,\n    address: foods.restaurant.address,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 9\n    }\n  }), isLoadingFoods && /*#__PURE__*/React.createElement(CentralizeLoading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(CircularProgress, {\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 46\n    }\n  })), !isLoadingFoods && errorFoods && /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 41\n    }\n  }, \"Erro\"), !isLoadingFoods && foods && listFoods, !isLoadingFoods && foods && listFoods.length === 0 && /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 9\n    }\n  }, \"N\\xE3o h\\xE1 nenhuma postagem\"), /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default RestaurantPage;","map":{"version":3,"sources":["/home/fillipecorreia/Desktop/LabeFood/Vaughan-labe-food5/src/pages/restaurantpage/RestaurantPage.js"],"names":["React","useState","useEffect","CardFood","ModalQuantityFood","BASE_URL","useRequestData","useParams","GlobalStateContext","useContext","Footer","CardRestaurant","CircularProgress","CentralizeLoading","styled","Header","Badge","div","RestaurantPage","quantityProduct","setQuantityProduct","productSelected","setProdutcSelected","showBadge","setShowBadge","btn","setBtn","category","setCategory","states","sets","pathParams","foods","isLoadingFoods","errorFoods","id","setOpenModal","onChangeQuantity","event","target","value","AddProductToCart","prod","addCart","product","quantity","foodItem","btnValue","idRestaurant","newCart","cart","setCart","foodItemBtn","newBtn","listFoods","restaurant","products","map","quantityOnCart","changeBtnValue","toRemove","updateProductsInCart","item","filter","console","log","logoUrl","name","deliveryTime","shipping","address","length"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport CardFood from \"../../components/CardFood/CardFood\";\nimport ModalQuantityFood from \"../../components/ModalQuantityFood/ModalQuantityFood\";\nimport { BASE_URL } from \"../../constants/urls\";\nimport { useRequestData } from \"../../hooks/useRequestData\";\nimport { useParams } from \"react-router-dom\";\n//import {useProtectedPage} from \"../../hooks/useProtectedPage\"\nimport { GlobalStateContext } from \"../../components/Global/GlobalStateContext\";\nimport { useContext } from \"react\";\nimport Footer from \"../../components/Footer/Footer\";\nimport CardRestaurant from \"../../components/CardRestaurant/CardRestaurant\";\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport {CentralizeLoading} from './styled'\nimport styled from 'styled-components';\nimport Header from \"../../components/Header/Header\";\n\nconst Badge = styled.div`\ndisplay:flex;\nalign-items:center;\njustify-content:center;\nbackground-color: #E86E5A;\nposition: relative;\ntop: -40px;\nright: -180px;\ncolor: #fff;\npadding: 0.5rem;\nheight: 10px;\nwidth: 10px;\nborder-radius: 50%;\n`\n\nconst RestaurantPage = () => {\n  const [quantityProduct , setQuantityProduct] = useState(0)\n  const [productSelected, setProdutcSelected] = useState({})\n  const [showBadge, setShowBadge] = useState(false);\n  const [btn, setBtn] = useState([]);\n  const [category, setCategory] = useState([]);\n\n  const { states, sets } = useContext(GlobalStateContext);\n  const pathParams = useParams();\n  const [foods, isLoadingFoods, errorFoods] = useRequestData(\n    `${BASE_URL}/restaurants/${pathParams.id}`\n  );\n  // useProtectedPage();\n\n  useEffect(() => {\n    sets.setOpenModal(false);\n  }, []);\n\n  const onChangeQuantity = (event) => {\n    setQuantityProduct(event.target.value);\n  };\n\n  const AddProductToCart = (prod, id) => {\n    setProdutcSelected(prod);\n    sets.setOpenModal(true);\n  };\n\n  const addCart = (product, quantity) => {\n    const foodItem = {\n      ...product,\n      quantity: quantity,\n      btnValue: \"remover\",\n      idRestaurant: pathParams.id,\n    };\n\n    const newCart = [...states.cart, foodItem];\n    sets.setCart(newCart);\n    sets.setOpenModal(false);\n    const foodItemBtn = {\n      ...product,\n      quantity: quantity,\n      btnValue: \"remover\",\n      idRestaurant: pathParams.id,\n    };\n    const newBtn = [...btn, foodItemBtn];\n    setBtn(newBtn);\n    sets.setOpenModal(false)\n    setShowBadge(true)\n  };\n\n  // const checkCategory = (products) => {\n  //   const newCategory = []\n  //  products.forEach(product => {\n  //   if(newCategory.includes(product.category) === false){\n  //     newCategory.push(product.category)\n  //   }\n  //  })\n  //   setCategory(newCategory)\n  //   console.log(category)\n  // }\n\n  const listFoods =\n    foods &&\n    foods.restaurant &&\n    foods.restaurant.products.map(\n      (product) => {\n\n        const quantityOnCart = states.cart && states.cart.map((cart)=>{\n          if(cart.id === product.id){\n            return <Badge>{cart.quantity}</Badge>\n          }\n        });\n\n      const changeBtnValue =\n        states.cart &&\n        states.cart.map((cart) => {\n          if (cart.id === product.id) {\n            return cart.btnValue;\n          }\n        });\n\n      const toRemove = () => {\n        const updateProductsInCart =\n          states.cart &&\n          states.cart\n            .map((item) => {\n              if (item.id === product.id) {\n                //  return item.quantity = item.quantity -1\n                return {\n                  ...item,\n                  quantity: item.quantity - 1,\n                };\n              }\n              return item;\n            })\n            .filter((item) => {\n              return item.quantity > 0;\n            });\n\n        sets.setCart(updateProductsInCart);\n\n        console.log(\"REMOVI\", states.cart);\n      };\n\n      return (\n        <CardFood\n          prodSelected={productSelected}\n          product={product}\n          key={product.id}\n          restaurantId={pathParams.id}\n          quantity={quantityProduct}\n          senQuantity={quantityOnCart}\n          addCart={addCart}\n          onChangeQuantity={onChangeQuantity}\n          onClickAdd={() => AddProductToCart(product, pathParams.id)}\n          onClickRemove={toRemove}\n          sendBtnChange={changeBtnValue}\n          showBadge={showBadge}\n        />\n      );\n    });\n  return (\n    <div>\n      <Header />\n\n      {foods && foods.restaurant && (\n        <CardRestaurant\n          image={foods.restaurant.logoUrl}\n          title={foods.restaurant.name}\n          category={foods.restaurant.category}\n          time={foods.restaurant.deliveryTime}\n          shipping={foods.restaurant.shipping}\n          address={foods.restaurant.address}\n        />\n      )}\n\n      {isLoadingFoods &&  <CentralizeLoading><CircularProgress color=\"primary\" /></CentralizeLoading>}\n      {!isLoadingFoods && errorFoods && <p>Erro</p>}\n      {!isLoadingFoods && foods && listFoods}\n      {!isLoadingFoods && foods && listFoods.length === 0 && (\n        <p>Não há nenhuma postagem</p>\n      )}\n      <Footer />\n    </div>\n  );\n};\n\nexport default RestaurantPage;\n"]},"metadata":{},"sourceType":"module"}