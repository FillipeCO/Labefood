{"ast":null,"code":"import axios from \"axios\";\nimport { BASE_URL } from \"../constants/urls\";\nimport { goToAdress, goToFeed } from \"../router/Coordinator\"; // *************** n ***************** //\n\nexport const handleLogin = (body, clear, navigate) => {\n  axios.post(`${BASE_URL}/login`, body).then(res => {\n    alert(\"ok\"); // console.log(res.data);\n    // console.log(res.data.user.name)\n\n    localStorage.setItem(\"token\", res.data.token);\n    console.log(res.data.token);\n\n    if (res.data.user.hasAddress === false) {\n      alert(`Olá ${res.data.user.name} você não possui um endereço associado. estamos te redirecionando...`);\n      goToAdress(navigate);\n    } else {\n      alert(\"BEM VINDO\"); // goToFeed(navigate);\n\n      goToFeed(navigate);\n    }\n\n    clear();\n  }).catch(error => {\n    alert(\"deu erro no login\");\n    console.log(error.response);\n  });\n}; // *************** axios do endereco ***************** //\n\nexport const handleAdress = (body, clear, navigate) => {\n  const headers = {\n    headers: {\n      Auth: localStorage.getItem(\"token\")\n    }\n  };\n  axios.put(`${BASE_URL}/address`, body, headers).then(res => {\n    alert(\"end criado com sucesso\");\n    console.log(res.data);\n    clear();\n  }).catch(error => {\n    alert(\"end deu erro\");\n    console.log(error.response);\n  });\n}; // *************** axios do perfil do usuário ***************** //\n\nexport const getProfile = setProfile => {\n  const headers = {\n    headers: {\n      auth: localStorage.getItem(\"token\")\n    }\n  };\n  axios.get(`${BASE_URL}/profile`, headers).then(response => setProfile(response.data.user)).catch(error => {\n    console.log(error.response);\n  });\n}; // *************** axios dos restaurantes ***************** //\n\nexport const getRestaurants = setRestaurants => {\n  const headers = {\n    headers: {\n      Auth: localStorage.getItem(\"token\")\n    }\n  };\n  axios.get(`${BASE_URL}/restaurants`, headers).then(response => setRestaurants(response.data.restaurants)) // console.log(\"Restaurants: \", restaurants);\n  .catch(err => {\n    console.log(err.response);\n  });\n}; // *************** axios dos detalhes do restaurante ***************** //\n\nexport const getDetailRestaurant = (id, setRestaurant) => {\n  const headers = {\n    headers: {\n      Auth: localStorage.getItem(\"token\")\n    }\n  };\n  axios.get(`${BASE_URL}/restaurants/${id}`, headers).then(response => setRestaurant(response.data.restaurant)) // .then((res) => {\n  //   console.log(res.data.restaurant);\n  //   setRestaurant(res.data.restaurant);\n  // })\n  .catch(err => {\n    console.log(err.response);\n  });\n};","map":{"version":3,"sources":["/home/fillipecorreia/Desktop/LabeFood/Vaughan-labe-food5/src/axiosRequests/user.js"],"names":["axios","BASE_URL","goToAdress","goToFeed","handleLogin","body","clear","navigate","post","then","res","alert","localStorage","setItem","data","token","console","log","user","hasAddress","name","catch","error","response","handleAdress","headers","Auth","getItem","put","getProfile","setProfile","auth","get","getRestaurants","setRestaurants","restaurants","err","getDetailRestaurant","id","setRestaurant","restaurant"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport { BASE_URL } from \"../constants/urls\";\nimport { goToAdress, goToFeed } from \"../router/Coordinator\";\n\n// *************** n ***************** //\n\nexport const handleLogin = (body, clear, navigate) => {\n  axios\n    .post(`${BASE_URL}/login`, body)\n    .then((res) => {\n      alert(\"ok\");\n      // console.log(res.data);\n      // console.log(res.data.user.name)\n      localStorage.setItem(\"token\", res.data.token);\n      console.log(res.data.token);\n\n      if (res.data.user.hasAddress === false) {\n        alert(\n          `Olá ${res.data.user.name} você não possui um endereço associado. estamos te redirecionando...`\n        );\n        goToAdress(navigate);\n      } else {\n        alert(\"BEM VINDO\");\n        // goToFeed(navigate);\n        goToFeed(navigate);\n      }\n      clear();\n    })\n    .catch((error) => {\n      alert(\"deu erro no login\");\n      console.log(error.response);\n    })\n}\n\n// *************** axios do endereco ***************** //\n\n\nexport const handleAdress = (body, clear, navigate) => {\n  const headers = {\n    headers: {\n      Auth: localStorage.getItem(\"token\"),\n    }\n  }\n\n  axios\n    .put(`${BASE_URL}/address`, body, headers)\n    .then((res) => {\n      alert(\"end criado com sucesso\");\n      console.log(res.data);\n      clear();\n    })\n    .catch((error) => {\n      alert(\"end deu erro\");\n      console.log(error.response);\n    })\n}\n\n// *************** axios do perfil do usuário ***************** //\n\n\nexport const getProfile = (setProfile) => {\n  const headers = {\n    headers: {\n      auth: localStorage.getItem(\"token\"),\n    }\n  }\n\n  axios\n    .get(`${BASE_URL}/profile`, headers)\n    .then((response) => setProfile(response.data.user))\n    .catch((error) => {\n      console.log(error.response);\n    })\n}\n\n// *************** axios dos restaurantes ***************** //\n\n\nexport const getRestaurants = (setRestaurants) => {\n  const headers = {\n    headers: {\n      Auth: localStorage.getItem(\"token\")\n    }\n  }\n  axios\n    .get(`${BASE_URL}/restaurants`, headers)\n    .then((response) => setRestaurants(response.data.restaurants))\n    // console.log(\"Restaurants: \", restaurants);\n    .catch((err) => {\n      console.log(err.response);\n    })\n}\n\n// *************** axios dos detalhes do restaurante ***************** //\n\n\nexport const getDetailRestaurant = (id, setRestaurant) => {\n  const headers = {\n    headers: {\n      Auth: localStorage.getItem(\"token\")\n    }\n  }\n  axios\n    .get(`${BASE_URL}/restaurants/${id}`, headers)\n    .then((response) => setRestaurant(response.data.restaurant))\n    // .then((res) => {\n    //   console.log(res.data.restaurant);\n    //   setRestaurant(res.data.restaurant);\n    // })\n    .catch((err) => {\n      console.log(err.response);\n    })\n}"]},"metadata":{},"sourceType":"module"}