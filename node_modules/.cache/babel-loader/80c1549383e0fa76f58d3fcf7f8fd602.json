{"ast":null,"code":"import _slicedToArray from\"/home/fillipecorreia/Desktop/LabeFood/Vaughan-labe-food5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useEffect,useState}from\"react\";import axios from\"axios\";import AccessTimeIcon from\"@material-ui/icons/AccessTime\";import{BASE_URL}from'../../constants/urls';import FeedCard from\"../../components/FeedCard/FeedCard\";import{GlobalStateContext}from\"../../components/Global/GlobalStateContext\";import{useNavigate}from\"react-router-dom\";import Footer from\"../../components/Footer/Footer\";import{ConteinerInput,PageContainer,ConteinerNav,SectionNavbar,OrderActiveCtn,OrderActive,CtnTimer,ColorWhite}from\"./styled\";import{InputAdornment,TextField}from\"@material-ui/core\";import{Search}from\"@material-ui/icons\";import Navbar from\"../../components/Navbar/Navbar\";import Header from\"../../components/Header/Header\";import{useProtectedPage}from\"../../hooks/useProtectedPage\";var FeedPage=function FeedPage(){useProtectedPage();var _useContext=useContext(GlobalStateContext),states=_useContext.states,sets=_useContext.sets;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),errorOrder=_useState2[0],setErrorOrder=_useState2[1];var navigate=useNavigate();var goToSearch=function goToSearch(){navigate(\"/busca\");};var goToRestaurantDetail=function goToRestaurantDetail(id){sets.setFilteredRestaurants(states.restaurants);navigate(\"/restaurante/\".concat(id));};useEffect(function(){sets.setFilteredRestaurants(states.restaurants);getActiveOrder();},[]);var getActiveOrder=function getActiveOrder(){axios.get(\"\".concat(BASE_URL,\"/active-order\"),{headers:{auth:localStorage.getItem(\"token\")}}).then(function(res){sets.setOrderStatus(res.data.order);console.log(states.orderStatus);}).catch(function(err){setErrorOrder(err);});};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(PageContainer,null,/*#__PURE__*/React.createElement(ConteinerInput,null,/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",onClick:function onClick(){return goToSearch(navigate);},placeholder:\"  Restaurante\",InputProps:{startAdornment:/*#__PURE__*/React.createElement(InputAdornment,{position:\"start\"},/*#__PURE__*/React.createElement(Search,null))}})),/*#__PURE__*/React.createElement(Navbar,null),states.filteredRestaurants&&states.filteredRestaurants.map(function(restaurant,i){return/*#__PURE__*/React.createElement(FeedCard,{key:i,restaurants:restaurant,onClickRestaurant:function onClickRestaurant(){return goToRestaurantDetail(restaurant.id);}});}),states.orderStatus&&states.orderStatus&&states.orderStatus[0]!==null&&!errorOrder?/*#__PURE__*/React.createElement(OrderActiveCtn,null,/*#__PURE__*/React.createElement(OrderActive,null,/*#__PURE__*/React.createElement(CtnTimer,null,/*#__PURE__*/React.createElement(AccessTimeIcon,{fontSize:\"large\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(ColorWhite,null,/*#__PURE__*/React.createElement(\"p\",null,\"Pedido em andamento\")),/*#__PURE__*/React.createElement(\"p\",null,states.orderStatus&&states.orderStatus.restaurantName),/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"strong\",null,\"SUBTOTAL R$\",states.orderStatus&&states.orderStatus.totalPrice))))):/*#__PURE__*/React.createElement(React.Fragment,null)),/*#__PURE__*/React.createElement(Footer,null));};export default FeedPage;","map":{"version":3,"sources":["/home/fillipecorreia/Desktop/LabeFood/Vaughan-labe-food5/src/pages/feedpage/FeedPage.js"],"names":["React","useContext","useEffect","useState","axios","AccessTimeIcon","BASE_URL","FeedCard","GlobalStateContext","useNavigate","Footer","ConteinerInput","PageContainer","ConteinerNav","SectionNavbar","OrderActiveCtn","OrderActive","CtnTimer","ColorWhite","InputAdornment","TextField","Search","Navbar","Header","useProtectedPage","FeedPage","states","sets","errorOrder","setErrorOrder","navigate","goToSearch","goToRestaurantDetail","id","setFilteredRestaurants","restaurants","getActiveOrder","get","headers","auth","localStorage","getItem","then","res","setOrderStatus","data","order","console","log","orderStatus","catch","err","startAdornment","filteredRestaurants","map","restaurant","i","restaurantName","totalPrice"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport AccessTimeIcon from \"@material-ui/icons/AccessTime\";\nimport {BASE_URL} from '../../constants/urls'\nimport FeedCard from \"../../components/FeedCard/FeedCard\";\nimport { GlobalStateContext } from \"../../components/Global/GlobalStateContext\";\nimport { useNavigate } from \"react-router-dom\";\nimport Footer from \"../../components/Footer/Footer\";\nimport {\n  ConteinerInput,\n  PageContainer,\n  ConteinerNav,\n  SectionNavbar,\n  OrderActiveCtn,\n  OrderActive,\n  CtnTimer,\n  ColorWhite,\n} from \"./styled\";\nimport { InputAdornment, TextField } from \"@material-ui/core\";\nimport { Search } from \"@material-ui/icons\";\nimport Navbar from \"../../components/Navbar/Navbar\";\nimport Header from \"../../components/Header/Header\";\nimport { useProtectedPage } from \"../../hooks/useProtectedPage\";\n\nconst FeedPage = () => {\n  useProtectedPage();\n  const { states, sets } = useContext(GlobalStateContext);\n  const [errorOrder, setErrorOrder] = useState(\"\")\n  const navigate = useNavigate();\n\n  const goToSearch = () => {\n    navigate(`/busca`);\n  };\n  const goToRestaurantDetail = (id) => {\n    sets.setFilteredRestaurants(states.restaurants);\n    navigate(`/restaurante/${id}`);\n  };\n\n  useEffect(() => {\n    sets.setFilteredRestaurants(states.restaurants);\n    getActiveOrder();\n  }, []);\n\nconst getActiveOrder = () => {\n    axios\n      .get(`${BASE_URL}/active-order`, {\n        headers: {\n          auth: localStorage.getItem(\"token\")\n        },\n      })\n      .then((res) => {\n        sets.setOrderStatus(res.data.order);\n        console.log(states.orderStatus)\n      })\n      .catch((err) => {\n        setErrorOrder(err)\n      });\n  };\n\n  return (\n    <div>\n      <Header />\n      <PageContainer>\n        \n        <ConteinerInput>\n          <TextField\n            variant=\"outlined\"\n            onClick={() => goToSearch(navigate)}\n            placeholder={\"  Restaurante\"}\n            InputProps={{\n              startAdornment: (\n                <InputAdornment position=\"start\">\n                  <Search />\n                </InputAdornment>\n              ),\n            }}\n          />\n        </ConteinerInput>\n\n        <Navbar />\n\n        {states.filteredRestaurants &&\n          states.filteredRestaurants.map((restaurant, i) => (\n            <FeedCard\n              key={i}\n              restaurants={restaurant}\n              onClickRestaurant={() => goToRestaurantDetail(restaurant.id)}\n            />\n          ))}\n                  {states.orderStatus  && states.orderStatus && states.orderStatus[0] !== null && !errorOrder ?  (\n          <OrderActiveCtn>\n            <OrderActive>\n              <CtnTimer>\n                <AccessTimeIcon fontSize=\"large\" />\n              </CtnTimer>\n              <div>\n                <ColorWhite>\n                  <p>Pedido em andamento</p>\n                </ColorWhite>\n                <p>{states.orderStatus && states.orderStatus.restaurantName}</p>\n                <p><strong>SUBTOTAL R${states.orderStatus && states.orderStatus.totalPrice}</strong></p>\n              </div>\n            </OrderActive>\n          </OrderActiveCtn>\n        ) : (\n          <></>\n        )}\n      </PageContainer>\n      <Footer />\n    </div>\n  );\n};\nexport default FeedPage;\n"]},"metadata":{},"sourceType":"module"}