{"ast":null,"code":"import React,{useContext,useEffect,useState}from\"react\";import FeedCard from\"../../components/FeedCard/FeedCard\";import{GlobalStateContext}from\"../../components/Global/GlobalStateContext\";import{useNavigate}from\"react-router-dom\";import Footer from\"../../components/Footer/Footer\";import{ConteinerInput,PageContainer,OrderActive,OrderActiveCtn,CtnTimer,ColorWhite}from\"./styled\";import{InputAdornment,TextField}from\"@material-ui/core\";import{Search}from\"@material-ui/icons\";import Navbar from\"../../components/Navbar/Navbar\";import Header from\"../../components/Header/Header\";import{useProtectedPage}from\"../../hooks/useProtectedPage\";import{BASE_URL}from\"../../constants/urls\";import axios from\"axios\";import{getAuthToken}from\"../../constants/token\";import AccessTimeIcon from\"@material-ui/icons/AccessTime\";var FeedPage=function FeedPage(){useProtectedPage();var _useContext=useContext(GlobalStateContext),states=_useContext.states,sets=_useContext.sets;var navigate=useNavigate();var getActiveOrder=function getActiveOrder(){axios.get(\"\".concat(BASE_URL,\"/active-order\"),{headers:{auth:getAuthToken()}}).then(function(res){sets.setOrderStatus(res.data.order);}).catch(function(err){console.log(err);});};var goToSearch=function goToSearch(){navigate(\"/busca\");};var goToRestaurantDetail=function goToRestaurantDetail(id){sets.setFilteredRestaurants(states.restaurants);navigate(\"/restaurante/\".concat(id));};useEffect(function(){sets.setFilteredRestaurants(states.restaurants);getActiveOrder();},[]);return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(PageContainer,null,/*#__PURE__*/React.createElement(ConteinerInput,null,/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",onClick:function onClick(){return goToSearch(navigate);},placeholder:\"  Restaurante\",InputProps:{startAdornment:/*#__PURE__*/React.createElement(InputAdornment,{position:\"start\"},/*#__PURE__*/React.createElement(Search,null))}})),/*#__PURE__*/React.createElement(Navbar,null),states.filteredRestaurants&&states.filteredRestaurants.map(function(restaurant,i){return/*#__PURE__*/React.createElement(FeedCard,{key:i,restaurants:restaurant,onClickRestaurant:function onClickRestaurant(){return goToRestaurantDetail(restaurant.id);}});}),states.orderStatus&&states.orderStatus?/*#__PURE__*/React.createElement(OrderActiveCtn,null,/*#__PURE__*/React.createElement(OrderActive,null,/*#__PURE__*/React.createElement(CtnTimer,null,/*#__PURE__*/React.createElement(AccessTimeIcon,{fontSize:\"large\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(ColorWhite,null,/*#__PURE__*/React.createElement(\"p\",null,\"Pedido em andamento\")),/*#__PURE__*/React.createElement(\"p\",null,states.orderStatus&&states.orderStatus.restaurantName),/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"strong\",null,\"SUBTOTAL R$\",states.orderStatus&&states.orderStatus.totalPrice))))):/*#__PURE__*/React.createElement(React.Fragment,null)),/*#__PURE__*/React.createElement(Footer,null));};export default FeedPage;","map":{"version":3,"sources":["/home/fillipecorreia/Desktop/LabeFood/Vaughan-labe-food5/src/pages/feedpage/FeedPage.js"],"names":["React","useContext","useEffect","useState","FeedCard","GlobalStateContext","useNavigate","Footer","ConteinerInput","PageContainer","OrderActive","OrderActiveCtn","CtnTimer","ColorWhite","InputAdornment","TextField","Search","Navbar","Header","useProtectedPage","BASE_URL","axios","getAuthToken","AccessTimeIcon","FeedPage","states","sets","navigate","getActiveOrder","get","headers","auth","then","res","setOrderStatus","data","order","catch","err","console","log","goToSearch","goToRestaurantDetail","id","setFilteredRestaurants","restaurants","startAdornment","filteredRestaurants","map","restaurant","i","orderStatus","restaurantName","totalPrice"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\nimport FeedCard from \"../../components/FeedCard/FeedCard\";\nimport { GlobalStateContext } from \"../../components/Global/GlobalStateContext\";\nimport { useNavigate } from \"react-router-dom\";\nimport Footer from \"../../components/Footer/Footer\";\nimport {\n  ConteinerInput,\n  PageContainer,\n  OrderActive,\n  OrderActiveCtn,\n  CtnTimer,\n  ColorWhite,\n} from \"./styled\";\nimport { InputAdornment, TextField } from \"@material-ui/core\";\nimport { Search } from \"@material-ui/icons\";\nimport Navbar from \"../../components/Navbar/Navbar\";\nimport Header from \"../../components/Header/Header\";\nimport { useProtectedPage } from \"../../hooks/useProtectedPage\";\nimport { BASE_URL } from \"../../constants/urls\";\nimport axios from \"axios\";\nimport { getAuthToken } from \"../../constants/token\";\nimport AccessTimeIcon from \"@material-ui/icons/AccessTime\";\n\nconst FeedPage = () => {\n  useProtectedPage();\n  const { states, sets } = useContext(GlobalStateContext);\n\n  const navigate = useNavigate();\n\n  const getActiveOrder = () => {\n    axios\n      .get(`${BASE_URL}/active-order`, {\n        headers: {\n          auth: getAuthToken(),\n        },\n      })\n      .then((res) => {\n        sets.setOrderStatus(res.data.order);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  const goToSearch = () => {\n    navigate(`/busca`);\n  };\n  const goToRestaurantDetail = (id) => {\n    sets.setFilteredRestaurants(states.restaurants);\n    navigate(`/restaurante/${id}`);\n  };\n\n  useEffect(() => {\n    sets.setFilteredRestaurants(states.restaurants);\n    getActiveOrder();\n  }, []);\n\n\n  return (\n    <div>\n      <Header />\n      <PageContainer>\n        <ConteinerInput>\n          <TextField\n            variant=\"outlined\"\n            onClick={() => goToSearch(navigate)}\n            placeholder={\"  Restaurante\"}\n            InputProps={{\n              startAdornment: (\n                <InputAdornment position=\"start\">\n                  <Search />\n                </InputAdornment>\n              ),\n            }}\n          />\n        </ConteinerInput>\n\n        <Navbar />\n\n        {states.filteredRestaurants &&\n          states.filteredRestaurants.map((restaurant, i) => (\n            <FeedCard\n              key={i}\n              restaurants={restaurant}\n              onClickRestaurant={() => goToRestaurantDetail(restaurant.id)}\n            />\n          ))}\n        {states.orderStatus && states.orderStatus ? (\n          <OrderActiveCtn>\n            <OrderActive>\n              <CtnTimer>\n                <AccessTimeIcon fontSize=\"large\" />\n              </CtnTimer>\n              <div>\n                <ColorWhite>\n                  <p>Pedido em andamento</p>\n                </ColorWhite>\n                <p>{states.orderStatus && states.orderStatus.restaurantName}</p>\n                <p><strong>SUBTOTAL R${states.orderStatus && states.orderStatus.totalPrice}</strong></p>\n              </div>\n            </OrderActive>\n          </OrderActiveCtn>\n        ) : (\n          <></>\n        )}\n      </PageContainer>\n\n      <Footer />\n    </div>\n  );\n};\nexport default FeedPage;\n"]},"metadata":{},"sourceType":"module"}