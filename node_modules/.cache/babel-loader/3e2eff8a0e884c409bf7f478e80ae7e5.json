{"ast":null,"code":"var _jsxFileName = \"/home/fillipecorreia/Desktop/LabeFood/Vaughan-labe-food5/src/pages/restaurantpage/RestaurantPage.js\";\nimport React, { useState, useEffect } from \"react\";\nimport CardFood from \"../../components/CardFood/CardFood\";\nimport { BASE_URL } from \"../../constants/urls\";\nimport { useRequestData } from \"../../hooks/useRequestData\";\nimport { useParams } from \"react-router-dom\";\nimport { useProtectedPage } from \"../../hooks/useProtectedPage\";\nimport { GlobalStateContext } from \"../../components/Global/GlobalStateContext\";\nimport { useContext } from \"react\";\nimport Footer from \"../../components/Footer/Footer\";\nimport CardRestaurant from \"../../components/CardRestaurant/CardRestaurant\";\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { CentralizeLoading, RestaurantPageContainer } from './styled';\nimport styled from 'styled-components';\nimport Header from \"../../components/Header/Header\";\nconst Badge = styled.div`\ndisplay:flex;\nalign-items:center;\njustify-content:center;\nbackground-color: #E86E5A;\nposition: relative;\ntop: -40px;\nright: -160px;\ncolor: #fff;\npadding: 0.5rem;\nheight: 10px;\nwidth: 10px;\nborder-radius: 50%;\n`;\n\nconst RestaurantPage = () => {\n  const [quantityProduct, setQuantityProduct] = useState(0);\n  const [productSelected, setProdutcSelected] = useState({});\n  const [showBadge, setShowBadge] = useState(false);\n  const [btn, setBtn] = useState([]);\n  const [category, setCategory] = useState([]);\n  const {\n    states,\n    sets\n  } = useContext(GlobalStateContext);\n  const pathParams = useParams();\n  const [foods, isLoadingFoods, errorFoods] = useRequestData(`${BASE_URL}/restaurants/${pathParams.id}`);\n  useProtectedPage();\n  useEffect(() => {\n    sets.setOpenModal(false);\n    {\n      states.cart.length > 0 ? setShowBadge(true) : setShowBadge(false);\n    }\n  }, []);\n\n  const onChangeQuantity = event => {\n    setQuantityProduct(event.target.value);\n  };\n\n  const AddProductToCart = prod => {\n    if (states.restaurantId && states.restaurantId !== pathParams.id) {\n      if (window.confirm(\"Quer modificar seu pedido? Lembre-se que você tem produtos adicionados na sua cesta. Deseja remover estes produtos e adicionar novos?\")) {\n        sets.setRestaurantId(\"\");\n        sets.setCart([]);\n        setProdutcSelected(prod);\n        sets.setOpenModal(true);\n      }\n    } else {\n      setProdutcSelected(prod);\n      sets.setOpenModal(true);\n    }\n\n    ;\n  };\n\n  const addCart = (product, quantity) => {\n    let quant = quantity;\n\n    if (quant === 0) {\n      quant = quant + 1;\n    }\n\n    const foodItem = { ...product,\n      quantity: quant,\n      btnValue: \"remover\",\n      idRestaurant: Number(pathParams.id)\n    };\n    const newCart = [...states.cart, foodItem];\n    sets.setCart(newCart);\n    sets.setOpenModal(false);\n    const foodItemBtn = { ...product,\n      quantity: quant,\n      btnValue: \"remover\",\n      idRestaurant: pathParams.id\n    };\n    const newBtn = [...btn, foodItemBtn];\n    setBtn(newBtn);\n    sets.setOpenModal(false);\n    setShowBadge(true);\n    sets.setRestaurantId(pathParams.id);\n  };\n\n  const listFoods = foods && foods.restaurant && foods.restaurant.products.map(product => {\n    const quantityOnCart = states.cart && states.cart.map(cart => {\n      if (cart.id === product.id) {\n        return cart.quantity;\n      }\n    });\n    const changeBtnValue = states.cart && states.cart.map(cart => {\n      if (cart.id === product.id) {\n        return cart.btnValue;\n      }\n    });\n\n    const toRemove = () => {\n      const updateProductsInCart = states.cart && states.cart.map(item => {\n        if (item.id === product.id) {\n          return { ...item,\n            quantity: item.quantity - 1\n          };\n        }\n\n        return item;\n      }).filter(item => {\n        return item.quantity > 0;\n      });\n      sets.setCart(updateProductsInCart);\n    };\n\n    return /*#__PURE__*/React.createElement(CardFood, {\n      prodSelected: productSelected,\n      product: product,\n      key: product.id,\n      restaurantId: pathParams.id,\n      quantity: quantityProduct,\n      sendQuantity: quantityOnCart,\n      addCart: addCart,\n      onChangeQuantity: onChangeQuantity,\n      onClickAdd: () => AddProductToCart(product),\n      onClickRemove: toRemove,\n      sendBtnChange: changeBtnValue,\n      showBadge: showBadge,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }\n    });\n  });\n  return /*#__PURE__*/React.createElement(RestaurantPageContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 7\n    }\n  }), foods && foods.restaurant && /*#__PURE__*/React.createElement(CardRestaurant, {\n    image: foods.restaurant.logoUrl,\n    title: foods.restaurant.name,\n    category: foods.restaurant.category,\n    time: foods.restaurant.deliveryTime,\n    shipping: foods.restaurant.shipping,\n    address: foods.restaurant.address,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default RestaurantPage;","map":{"version":3,"sources":["/home/fillipecorreia/Desktop/LabeFood/Vaughan-labe-food5/src/pages/restaurantpage/RestaurantPage.js"],"names":["React","useState","useEffect","CardFood","BASE_URL","useRequestData","useParams","useProtectedPage","GlobalStateContext","useContext","Footer","CardRestaurant","CircularProgress","CentralizeLoading","RestaurantPageContainer","styled","Header","Badge","div","RestaurantPage","quantityProduct","setQuantityProduct","productSelected","setProdutcSelected","showBadge","setShowBadge","btn","setBtn","category","setCategory","states","sets","pathParams","foods","isLoadingFoods","errorFoods","id","setOpenModal","cart","length","onChangeQuantity","event","target","value","AddProductToCart","prod","restaurantId","window","confirm","setRestaurantId","setCart","addCart","product","quantity","quant","foodItem","btnValue","idRestaurant","Number","newCart","foodItemBtn","newBtn","listFoods","restaurant","products","map","quantityOnCart","changeBtnValue","toRemove","updateProductsInCart","item","filter","logoUrl","name","deliveryTime","shipping","address"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport CardFood from \"../../components/CardFood/CardFood\";\nimport { BASE_URL } from \"../../constants/urls\";\nimport { useRequestData } from \"../../hooks/useRequestData\";\nimport { useParams } from \"react-router-dom\";\nimport {useProtectedPage} from \"../../hooks/useProtectedPage\"\nimport { GlobalStateContext } from \"../../components/Global/GlobalStateContext\";\nimport { useContext } from \"react\";\nimport Footer from \"../../components/Footer/Footer\";\nimport CardRestaurant from \"../../components/CardRestaurant/CardRestaurant\";\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport {CentralizeLoading, RestaurantPageContainer} from './styled'\nimport styled from 'styled-components';\nimport Header from \"../../components/Header/Header\";\n\nconst Badge = styled.div`\ndisplay:flex;\nalign-items:center;\njustify-content:center;\nbackground-color: #E86E5A;\nposition: relative;\ntop: -40px;\nright: -160px;\ncolor: #fff;\npadding: 0.5rem;\nheight: 10px;\nwidth: 10px;\nborder-radius: 50%;\n`\n\nconst RestaurantPage = () => {\n  const [quantityProduct , setQuantityProduct] = useState(0)\n  const [productSelected, setProdutcSelected] = useState({})\n  const [showBadge, setShowBadge] = useState(false);\n  const [btn, setBtn] = useState([]);\n  const [category, setCategory] = useState([]);\n\n  const { states, sets } = useContext(GlobalStateContext);\n  const pathParams = useParams();\n  const [foods, isLoadingFoods, errorFoods] = useRequestData(\n    `${BASE_URL}/restaurants/${pathParams.id}`\n  );\n   useProtectedPage();\n\n  useEffect(() => {\n    sets.setOpenModal(false);\n    {states.cart.length > 0 ? setShowBadge(true) : setShowBadge(false)}\n  }, []);\n\n  const onChangeQuantity = (event) => {\n    setQuantityProduct(event.target.value);\n  };\n\n  const AddProductToCart = (prod) => {\n    if(states.restaurantId && states.restaurantId !== pathParams.id){\n      if(window.confirm(\"Quer modificar seu pedido? Lembre-se que você tem produtos adicionados na sua cesta. Deseja remover estes produtos e adicionar novos?\")){\n        sets.setRestaurantId(\"\")\n        sets.setCart([])\n        setProdutcSelected(prod);\n        sets.setOpenModal(true);\n      }\n    }else{\n      setProdutcSelected(prod);\n      sets.setOpenModal(true);\n  };\n}\n\n  const addCart = (product, quantity) => {\n    let quant = quantity\n    if(quant === 0){\n       quant = quant + 1\n    }\n  \n    const foodItem = {\n      ...product,\n      quantity: quant,\n      btnValue: \"remover\",\n      idRestaurant: Number(pathParams.id),\n    };\n\n    const newCart = [...states.cart, foodItem];\n    sets.setCart(newCart);\n    sets.setOpenModal(false);\n    const foodItemBtn = {\n      ...product,\n      quantity: quant,\n      btnValue: \"remover\",\n      idRestaurant: pathParams.id,\n    };\n    const newBtn = [...btn, foodItemBtn];\n    setBtn(newBtn);\n    sets.setOpenModal(false)\n    setShowBadge(true)\n    sets.setRestaurantId(pathParams.id)\n  };\n\n\n  const listFoods =\n    foods &&\n    foods.restaurant &&\n    foods.restaurant.products.map(\n      (product) => {\n\n        const quantityOnCart = states.cart && states.cart.map((cart)=>{\n          if(cart.id === product.id){\n            return cart.quantity\n          }\n        });\n\n      const changeBtnValue =\n        states.cart &&\n        states.cart.map((cart) => {\n          if (cart.id === product.id) {\n            return cart.btnValue;\n          }\n        });\n\n      const toRemove = () => {\n        const updateProductsInCart =\n          states.cart &&\n          states.cart\n            .map((item) => {\n              if (item.id === product.id) {\n                return {\n                  ...item,\n                  quantity: item.quantity - 1,\n                };\n              }\n              return item;\n            })\n            .filter((item) => {\n              return item.quantity > 0;\n            });\n\n        sets.setCart(updateProductsInCart);\n\n      };\n\n      return (\n        <CardFood\n          prodSelected={productSelected}\n          product={product}\n          key={product.id}\n          restaurantId={pathParams.id}\n          quantity={quantityProduct}\n          sendQuantity={quantityOnCart}\n          addCart={addCart}\n          onChangeQuantity={onChangeQuantity}\n          onClickAdd={() => AddProductToCart(product)}\n          onClickRemove={toRemove}\n          sendBtnChange={changeBtnValue}\n          showBadge={showBadge}\n        />\n      );\n    });\n  return (\n    <RestaurantPageContainer>\n      <Header />\n\n      {foods && foods.restaurant && (\n        <CardRestaurant\n          image={foods.restaurant.logoUrl}\n          title={foods.restaurant.name}\n          category={foods.restaurant.category}\n          time={foods.restaurant.deliveryTime}\n          shipping={foods.restaurant.shipping}\n          address={foods.restaurant.address}\n        />\n      )}\n\n      {/* {isLoadingFoods &&  <CentralizeLoading><CircularProgress color=\"primary\" /></CentralizeLoading>}\n      {!isLoadingFoods && errorFoods && <p>Erro</p>}\n      {!isLoadingFoods && foods && listFoods}\n      {!isLoadingFoods && foods && listFoods.length === 0 && (\n        <p>Não há nenhuma postagem</p>\n      )} */}\n      <Footer />\n    </RestaurantPageContainer>\n  );\n};\n\nexport default RestaurantPage\n"]},"metadata":{},"sourceType":"module"}