{"ast":null,"code":"var _jsxFileName = \"/home/fillipecorreia/Desktop/LabeFood/Vaughan-labe-food5/src/components/Global/GlobalState.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { GlobalStateContext } from \"./GlobalStateContext\";\nimport { BASE_URL } from \"../../constants/urls\";\nimport axios from \"axios\";\nexport const GlobalState = props => {\n  const [restaurants, setRestaurants] = useState([]);\n  const [products, setProducts] = useState([]);\n  const [openModal, setOpenModal] = useState(false);\n  const [cart, setCart] = useState([]);\n  const [filter, setFilter] = useState('');\n  const [restaurantId, setRestaurantId] = useState(\"\");\n  console.log(\"ESTADO GLOBAL CART\", cart);\n  useEffect(() => {\n    pegarRestaurants();\n  }, []);\n  useEffect(() => {\n    pegarProducts();\n  }, [restaurants]);\n  useEffect(() => {\n    setFilter('');\n  }, [restaurants]); // useEffect(() => {\n  // }, [cart])\n\n  const pegarProducts = () => {\n    const newList = [];\n    restaurants.forEach(p => {\n      axios.get(`${BASE_URL}/restaurants/${p.id}`, {\n        headers: {\n          Auth: \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IkEwMDVtSEJmeVNrdDdPTjBITGFwIiwibmFtZSI6IkFzdHJvZGV2IiwiZW1haWwiOiJhc3Ryb2RldkBmdXR1cmU0LmNvbSIsImNwZiI6IjMzMy44ODguNjY2LTQ0IiwiaGFzQWRkcmVzcyI6dHJ1ZSwiYWRkcmVzcyI6IkJhbmFuaW5oYSwgOTgsIDY1IC0gQmFuYW5pbmhhIiwiaWF0IjoxNjQ3MjgxODYwfQ.v_AQdOG33NHtcXjizcAM6QR0qj-SCrtHx5VT0xM2XcE\"\n        }\n      }).then(res => {\n        newList.push(res.data.restaurant.products);\n\n        if (newList.length === 10) {\n          const orderedList = newList.sort((a, b) => {\n            return a.id - b.id;\n          });\n          setProducts(orderedList);\n        }\n      }).catch(error => console.log(error.message));\n    });\n  };\n\n  const pegarRestaurants = () => {\n    axios.get(`${BASE_URL}/restaurants`, {\n      headers: {\n        Auth: \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IkEwMDVtSEJmeVNrdDdPTjBITGFwIiwibmFtZSI6IkFzdHJvZGV2IiwiZW1haWwiOiJhc3Ryb2RldkBmdXR1cmU0LmNvbSIsImNwZiI6IjMzMy44ODguNjY2LTQ0IiwiaGFzQWRkcmVzcyI6dHJ1ZSwiYWRkcmVzcyI6IkJhbmFuaW5oYSwgOTgsIDY1IC0gQmFuYW5pbmhhIiwiaWF0IjoxNjQ3MjgxODYwfQ.v_AQdOG33NHtcXjizcAM6QR0qj-SCrtHx5VT0xM2XcE\"\n      }\n    }).then(({\n      data\n    }) => {\n      const newRestaurants = [];\n      data.restaurants.forEach(p => newRestaurants.push(p));\n      setRestaurants(oldRestaurants => [...oldRestaurants, ...newRestaurants]);\n    });\n  };\n\n  const states = {\n    openModal,\n    products,\n    restaurants,\n    cart,\n    restaurantId\n  };\n  const sets = {\n    setOpenModal,\n    setProducts,\n    setRestaurants,\n    setCart,\n    setRestaurantId\n  };\n  return /*#__PURE__*/React.createElement(GlobalStateContext.Provider, {\n    value: {\n      states,\n      sets\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 5\n    }\n  }, props.children);\n};\nexport default GlobalState; // address:\n// category:\n// deliveryTime:\n// description:\n// id:\n// logoUrl:\n// name:\n// shipping:","map":{"version":3,"sources":["/home/fillipecorreia/Desktop/LabeFood/Vaughan-labe-food5/src/components/Global/GlobalState.js"],"names":["React","useEffect","useState","GlobalStateContext","BASE_URL","axios","GlobalState","props","restaurants","setRestaurants","products","setProducts","openModal","setOpenModal","cart","setCart","filter","setFilter","restaurantId","setRestaurantId","console","log","pegarRestaurants","pegarProducts","newList","forEach","p","get","id","headers","Auth","then","res","push","data","restaurant","length","orderedList","sort","a","b","catch","error","message","newRestaurants","oldRestaurants","states","sets","children"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { GlobalStateContext } from \"./GlobalStateContext\";\nimport { BASE_URL } from \"../../constants/urls\";\nimport axios from \"axios\";\n\nexport const GlobalState = (props) => {\n  const [restaurants, setRestaurants] = useState([]);\n  const [products, setProducts] = useState([]);\n  const [openModal, setOpenModal] = useState(false)\n  const [cart, setCart] = useState([])\n  const [filter , setFilter] = useState('')\n\n  const [restaurantId, setRestaurantId] = useState(\"\")\n\n  console.log(\"ESTADO GLOBAL CART\", cart)\n\n  useEffect(() => {\n    pegarRestaurants();\n  }, []);\n  useEffect(() => {\n    pegarProducts();\n  }, [restaurants]);\n  useEffect(() => {\n    setFilter('')\n  }, [restaurants])\n\n\n  // useEffect(() => {\n\n  // }, [cart])\n\n  const pegarProducts = () => {\n    const newList = [];\n    restaurants.forEach((p) => {\n      axios\n        .get(`${BASE_URL}/restaurants/${p.id}`, {\n          headers: {\n            Auth: \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IkEwMDVtSEJmeVNrdDdPTjBITGFwIiwibmFtZSI6IkFzdHJvZGV2IiwiZW1haWwiOiJhc3Ryb2RldkBmdXR1cmU0LmNvbSIsImNwZiI6IjMzMy44ODguNjY2LTQ0IiwiaGFzQWRkcmVzcyI6dHJ1ZSwiYWRkcmVzcyI6IkJhbmFuaW5oYSwgOTgsIDY1IC0gQmFuYW5pbmhhIiwiaWF0IjoxNjQ3MjgxODYwfQ.v_AQdOG33NHtcXjizcAM6QR0qj-SCrtHx5VT0xM2XcE\",\n          },\n        })\n        .then((res) => {\n          newList.push(res.data.restaurant.products);\n          if (newList.length === 10) {\n            const orderedList = newList.sort((a, b) => {\n              return a.id - b.id;\n            });\n            setProducts(orderedList);\n            \n          }\n        })\n        .catch((error) => console.log(error.message));\n    });\n  };\n\n  const pegarRestaurants = () => {\n    axios\n      .get(`${BASE_URL}/restaurants`, {\n        headers: {\n          Auth: \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IkEwMDVtSEJmeVNrdDdPTjBITGFwIiwibmFtZSI6IkFzdHJvZGV2IiwiZW1haWwiOiJhc3Ryb2RldkBmdXR1cmU0LmNvbSIsImNwZiI6IjMzMy44ODguNjY2LTQ0IiwiaGFzQWRkcmVzcyI6dHJ1ZSwiYWRkcmVzcyI6IkJhbmFuaW5oYSwgOTgsIDY1IC0gQmFuYW5pbmhhIiwiaWF0IjoxNjQ3MjgxODYwfQ.v_AQdOG33NHtcXjizcAM6QR0qj-SCrtHx5VT0xM2XcE\",\n        },\n      })\n      .then(({ data }) => {\n        const newRestaurants = [];\n        data.restaurants.forEach((p) => newRestaurants.push(p));\n        setRestaurants((oldRestaurants) => [\n          ...oldRestaurants,\n          ...newRestaurants,\n        ]);\n      });\n  };\n\n  const states = {openModal, products, restaurants, cart, restaurantId}\n  const sets = {setOpenModal, setProducts, setRestaurants, setCart, setRestaurantId, }\n\n  return (\n    <GlobalStateContext.Provider value={{ states, sets }}>\n      {props.children}\n    </GlobalStateContext.Provider>\n  );\n};\n\nexport default GlobalState;\n// address:\n// category:\n// deliveryTime:\n// description:\n// id:\n// logoUrl:\n// name:\n// shipping:\n"]},"metadata":{},"sourceType":"module"}