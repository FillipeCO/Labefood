{"ast":null,"code":"import _slicedToArray from\"/home/fillipecorreia/Desktop/LabeFood/Vaughan-labe-food5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import CreateIcon from\"@material-ui/icons/Create\";import{Title,Container,Container2,RegisteredProfile,EditContainer,OrderHistoryContainer,AddressContainer,PageContainer,OrderHistoryTitleContainer}from\"./styled\";import React,{useEffect,useState}from\"react\";import axios from\"axios\";import{goToEditProfile,goToEditAddress}from\"../../router/Coordinator\";import{useNavigate}from\"react-router-dom\";import{getProfile,handleLogin,getOrderHistory}from\"../../axiosRequests/user\";import Footer from\"../../components/Footer/Footer\";import useForm from\"../../hooks/useForm\";import Header from\"../../components/Header/Header\";import{useProtectedPage}from\"../../hooks/useProtectedPage\";var ProfilePage=function ProfilePage(){useProtectedPage();var navigate=useNavigate();var _useState=useState({}),_useState2=_slicedToArray(_useState,2),profile=_useState2[0],setProfile=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),orderHistory=_useState4[0],setOrderHistory=_useState4[1];useEffect(function(){getProfile(setProfile);getOrderHistory(setOrderHistory);},[]);var formatDateToLocalDate=function formatDateToLocalDate(date){var dateUTC=new Date(date);return dateUTC.toLocaleDateString();};var formatDateToLocalTime=function formatDateToLocalTime(date){var dateUTC=new Date(date);return dateUTC.toLocaleTimeString();};var renderAddress=profile.address?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(AddressContainer,null,/*#__PURE__*/React.createElement(\"p\",null,\"Endere\\xE7o cadastrado:\"),/*#__PURE__*/React.createElement(\"p\",null,profile.address)),/*#__PURE__*/React.createElement(EditContainer,null,/*#__PURE__*/React.createElement(CreateIcon,{onClick:function onClick(){return goToEditAddress(navigate);}}))):/*#__PURE__*/React.createElement(AddressContainer,null,/*#__PURE__*/React.createElement(\"p\",null,\"Favor cadastrar um endere\\xE7o clicando\",\" \",/*#__PURE__*/React.createElement(\"strong\",{onClick:function onClick(){return navigate(\"/endereco\");}},\"aqui.\")));return console.log(orderHistory),/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(PageContainer,null,/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(RegisteredProfile,null,/*#__PURE__*/React.createElement(\"p\",null,profile.name),/*#__PURE__*/React.createElement(\"p\",null,profile.email),/*#__PURE__*/React.createElement(\"p\",null,profile.cpf)),/*#__PURE__*/React.createElement(EditContainer,null,/*#__PURE__*/React.createElement(CreateIcon,{onClick:function onClick(){return goToEditProfile(navigate);}}))),/*#__PURE__*/React.createElement(Container2,null,renderAddress),/*#__PURE__*/React.createElement(OrderHistoryTitleContainer,null,/*#__PURE__*/React.createElement(\"p\",null,\"Hist\\xF3rico de pedidos\"),/*#__PURE__*/React.createElement(\"hr\",null),orderHistory.length>0?/*#__PURE__*/React.createElement(\"div\",null,orderHistory.map(function(order){return/*#__PURE__*/React.createElement(OrderHistoryContainer,{key:order.id},/*#__PURE__*/React.createElement(\"p\",null,order.restaurantName),/*#__PURE__*/React.createElement(\"span\",null,formatDateToLocalDate(order.createdAt),\", \",formatDateToLocalTime(order.createdAt)),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"strong\",null,\"SUBTOTAL: R$\",order.totalPrice));})):/*#__PURE__*/React.createElement(\"p\",null,\"Nenhum pedido foi realizado ou seu pedido est\\xE1 em andamento.\"))),/*#__PURE__*/React.createElement(Footer,null));};export default ProfilePage;","map":{"version":3,"sources":["/home/fillipecorreia/Desktop/LabeFood/Vaughan-labe-food5/src/pages/profilepage/ProfilePage.js"],"names":["CreateIcon","Title","Container","Container2","RegisteredProfile","EditContainer","OrderHistoryContainer","AddressContainer","PageContainer","OrderHistoryTitleContainer","React","useEffect","useState","axios","goToEditProfile","goToEditAddress","useNavigate","getProfile","handleLogin","getOrderHistory","Footer","useForm","Header","useProtectedPage","ProfilePage","navigate","profile","setProfile","orderHistory","setOrderHistory","formatDateToLocalDate","date","dateUTC","Date","toLocaleDateString","formatDateToLocalTime","toLocaleTimeString","renderAddress","address","console","log","name","email","cpf","length","map","order","id","restaurantName","createdAt","totalPrice"],"mappings":"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","sourcesContent":["import CreateIcon from \"@material-ui/icons/Create\";\nimport {\n  Title,\n  Container,\n  Container2,\n  RegisteredProfile,\n  EditContainer,\n  OrderHistoryContainer,\n  AddressContainer,\n  PageContainer,\n  OrderHistoryTitleContainer,\n} from \"./styled\";\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { goToEditProfile, goToEditAddress } from \"../../router/Coordinator\";\nimport { useNavigate } from \"react-router-dom\";\nimport {\n  getProfile,\n  handleLogin,\n  getOrderHistory,\n} from \"../../axiosRequests/user\";\nimport Footer from \"../../components/Footer/Footer\";\nimport useForm from \"../../hooks/useForm\";\nimport Header from \"../../components/Header/Header\";\nimport { useProtectedPage } from \"../../hooks/useProtectedPage\";\n\nconst ProfilePage = () => {\n  useProtectedPage();\n  const navigate = useNavigate();\n  const [profile, setProfile] = useState({});\n  const [orderHistory, setOrderHistory] = useState([]);\n\n  useEffect(() => {\n    getProfile(setProfile);\n    getOrderHistory(setOrderHistory);\n  }, []);\n\n  const formatDateToLocalDate = (date) => {\n    const dateUTC = new Date(date);\n    return dateUTC.toLocaleDateString();\n  };\n\n  const formatDateToLocalTime = (date) => {\n    const dateUTC = new Date(date);\n    return dateUTC.toLocaleTimeString();\n  };\n\n  const renderAddress = profile.address ? (\n    <>\n    <AddressContainer>\n            <p>Endereço cadastrado:</p>\n            <p>{profile.address}</p>\n          </AddressContainer>\n          <EditContainer>\n            <CreateIcon onClick={() => goToEditAddress(navigate)} />\n          </EditContainer>\n          </>\n  ) : (\n    <AddressContainer>\n      <p>\n        Favor cadastrar um endereço clicando{\" \"}\n        <strong onClick={() => navigate(\"/endereco\")}>aqui.</strong>\n      </p>\n    </AddressContainer>\n  );\n\n  return (\n    console.log(orderHistory),\n    <>\n    <Header />\n      <PageContainer>\n        <Container>\n          <RegisteredProfile>\n            <p>{profile.name}</p>\n            <p>{profile.email}</p>\n            <p>{profile.cpf}</p>\n          </RegisteredProfile>\n          <EditContainer>\n            <CreateIcon onClick={() => goToEditProfile(navigate)} />\n          </EditContainer>\n        </Container>\n\n        <Container2>\n          {renderAddress}\n        </Container2>\n\n        <OrderHistoryTitleContainer>\n          <p>Histórico de pedidos</p>\n          <hr />\n\n\n\n          {orderHistory.length > 0 ? (\n            <div>\n              {orderHistory.map((order) => {\n                return (\n                  <OrderHistoryContainer key={order.id}>\n                    <p>{order.restaurantName}</p>\n                  <span>{formatDateToLocalDate(order.createdAt)}, {formatDateToLocalTime(order.createdAt)}</span>\n                  <br />\n                  <strong>SUBTOTAL: R${order.totalPrice}</strong>\n                  </OrderHistoryContainer>\n                );\n              })}\n            </div>\n      \n              \n          ) : (\n            <p>Nenhum pedido foi realizado ou seu pedido está em andamento.</p>\n          )}\n\n\n        </OrderHistoryTitleContainer>\n      </PageContainer>\n\n      <Footer />\n    </>\n  );\n};\n\nexport default ProfilePage;\n"]},"metadata":{},"sourceType":"module"}