{"ast":null,"code":"var _jsxFileName = \"/home/fillipecorreia/Desktop/LabeFood/Vaughan-labe-food5/src/pages/feedpage/FeedPage.js\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport AccessTimeIcon from \"@material-ui/icons/AccessTime\";\nimport { BASE_URL } from '../../constants/urls';\nimport FeedCard from \"../../components/FeedCard/FeedCard\";\nimport { GlobalStateContext } from \"../../components/Global/GlobalStateContext\";\nimport { useNavigate } from \"react-router-dom\";\nimport Footer from \"../../components/Footer/Footer\";\nimport { ConteinerInput, PageContainer, ConteinerNav, SectionNavbar, OrderActiveCtn, OrderActive, CtnTimer, ColorWhite } from \"./styled\";\nimport { InputAdornment, TextField } from \"@material-ui/core\";\nimport { Search } from \"@material-ui/icons\";\nimport Navbar from \"../../components/Navbar/Navbar\";\nimport Header from \"../../components/Header/Header\";\nimport { useProtectedPage } from \"../../hooks/useProtectedPage\";\n\nconst FeedPage = () => {\n  useProtectedPage();\n  const {\n    states,\n    sets\n  } = useContext(GlobalStateContext);\n  const [errorOrder, setErrorOrder] = useState(\"\");\n  const navigate = useNavigate();\n  const [loading, setLoading] = useState(false);\n\n  const goToSearch = () => {\n    navigate(`/busca`);\n  };\n\n  const goToRestaurantDetail = id => {\n    sets.setFilteredRestaurants(states.restaurants);\n    navigate(`/restaurante/${id}`);\n  };\n\n  useEffect(() => {\n    setLoading(true);\n    sets.setFilteredRestaurants(states.restaurants);\n    getActiveOrder();\n    setLoading(false);\n  }, []);\n\n  const getActiveOrder = () => {\n    axios.get(`${BASE_URL}/active-order`, {\n      headers: {\n        auth: localStorage.getItem(\"token\")\n      }\n    }).then(res => {\n      sets.setOrderStatus(res.data.order);\n      console.log(states.orderStatus);\n    }).catch(err => {\n      setErrorOrder(err);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(PageContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(ConteinerInput, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    variant: \"outlined\",\n    onClick: () => goToSearch(navigate),\n    placeholder: \"  Restaurante\",\n    InputProps: {\n      startAdornment: /*#__PURE__*/React.createElement(InputAdornment, {\n        position: \"start\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Search, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 19\n        }\n      }))\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Navbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }), states.filteredRestaurants && states.filteredRestaurants.map((restaurant, i) => /*#__PURE__*/React.createElement(FeedCard, {\n    key: i,\n    restaurants: restaurant,\n    onClickRestaurant: () => goToRestaurantDetail(restaurant.id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }\n  })), states.orderStatus && states.orderStatus && states.orderStatus[0] !== null && !errorOrder ? /*#__PURE__*/React.createElement(OrderActiveCtn, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(OrderActive, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(CtnTimer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(AccessTimeIcon, {\n    fontSize: \"large\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(ColorWhite, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 19\n    }\n  }, \"Pedido em andamento\")), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 17\n    }\n  }, states.orderStatus && states.orderStatus.restaurantName), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 20\n    }\n  }, \"SUBTOTAL R$\", states.orderStatus && states.orderStatus.totalPrice))))) : /*#__PURE__*/React.createElement(React.Fragment, null)), /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default FeedPage;","map":{"version":3,"sources":["/home/fillipecorreia/Desktop/LabeFood/Vaughan-labe-food5/src/pages/feedpage/FeedPage.js"],"names":["React","useContext","useEffect","useState","axios","AccessTimeIcon","BASE_URL","FeedCard","GlobalStateContext","useNavigate","Footer","ConteinerInput","PageContainer","ConteinerNav","SectionNavbar","OrderActiveCtn","OrderActive","CtnTimer","ColorWhite","InputAdornment","TextField","Search","Navbar","Header","useProtectedPage","FeedPage","states","sets","errorOrder","setErrorOrder","navigate","loading","setLoading","goToSearch","goToRestaurantDetail","id","setFilteredRestaurants","restaurants","getActiveOrder","get","headers","auth","localStorage","getItem","then","res","setOrderStatus","data","order","console","log","orderStatus","catch","err","startAdornment","filteredRestaurants","map","restaurant","i","restaurantName","totalPrice"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,SAA5B,EAAuCC,QAAvC,QAAuD,OAAvD;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,cAAP,MAA2B,+BAA3B;AACA,SAAQC,QAAR,QAAuB,sBAAvB;AACA,OAAOC,QAAP,MAAqB,oCAArB;AACA,SAASC,kBAAT,QAAmC,4CAAnC;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,OAAOC,MAAP,MAAmB,gCAAnB;AACA,SACEC,cADF,EAEEC,aAFF,EAGEC,YAHF,EAIEC,aAJF,EAKEC,cALF,EAMEC,WANF,EAOEC,QAPF,EAQEC,UARF,QASO,UATP;AAUA,SAASC,cAAT,EAAyBC,SAAzB,QAA0C,mBAA1C;AACA,SAASC,MAAT,QAAuB,oBAAvB;AACA,OAAOC,MAAP,MAAmB,gCAAnB;AACA,OAAOC,MAAP,MAAmB,gCAAnB;AACA,SAASC,gBAAT,QAAiC,8BAAjC;;AAEA,MAAMC,QAAQ,GAAG,MAAM;AACrBD,EAAAA,gBAAgB;AAChB,QAAM;AAAEE,IAAAA,MAAF;AAAUC,IAAAA;AAAV,MAAmB1B,UAAU,CAACO,kBAAD,CAAnC;AACA,QAAM,CAACoB,UAAD,EAAaC,aAAb,IAA8B1B,QAAQ,CAAC,EAAD,CAA5C;AACA,QAAM2B,QAAQ,GAAGrB,WAAW,EAA5B;AACA,QAAM,CAACsB,OAAD,EAAUC,UAAV,IAAwB7B,QAAQ,CAAC,KAAD,CAAtC;;AAEA,QAAM8B,UAAU,GAAG,MAAM;AACvBH,IAAAA,QAAQ,CAAE,QAAF,CAAR;AACD,GAFD;;AAGA,QAAMI,oBAAoB,GAAIC,EAAD,IAAQ;AACnCR,IAAAA,IAAI,CAACS,sBAAL,CAA4BV,MAAM,CAACW,WAAnC;AACAP,IAAAA,QAAQ,CAAE,gBAAeK,EAAG,EAApB,CAAR;AACD,GAHD;;AAKAjC,EAAAA,SAAS,CAAC,MAAM;AACd8B,IAAAA,UAAU,CAAC,IAAD,CAAV;AACAL,IAAAA,IAAI,CAACS,sBAAL,CAA4BV,MAAM,CAACW,WAAnC;AACAC,IAAAA,cAAc;AACdN,IAAAA,UAAU,CAAC,KAAD,CAAV;AACD,GALQ,EAKN,EALM,CAAT;;AAOF,QAAMM,cAAc,GAAG,MAAM;AACzBlC,IAAAA,KAAK,CACFmC,GADH,CACQ,GAAEjC,QAAS,eADnB,EACmC;AAC/BkC,MAAAA,OAAO,EAAE;AACPC,QAAAA,IAAI,EAAEC,YAAY,CAACC,OAAb,CAAqB,OAArB;AADC;AADsB,KADnC,EAMGC,IANH,CAMSC,GAAD,IAAS;AACblB,MAAAA,IAAI,CAACmB,cAAL,CAAoBD,GAAG,CAACE,IAAJ,CAASC,KAA7B;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYxB,MAAM,CAACyB,WAAnB;AACD,KATH,EAUGC,KAVH,CAUUC,GAAD,IAAS;AACdxB,MAAAA,aAAa,CAACwB,GAAD,CAAb;AACD,KAZH;AAaD,GAdH;;AAgBE,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEE,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,SAAD;AACE,IAAA,OAAO,EAAC,UADV;AAEE,IAAA,OAAO,EAAE,MAAMpB,UAAU,CAACH,QAAD,CAF3B;AAGE,IAAA,WAAW,EAAE,eAHf;AAIE,IAAA,UAAU,EAAE;AACVwB,MAAAA,cAAc,eACZ,oBAAC,cAAD;AAAgB,QAAA,QAAQ,EAAC,OAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF;AAFQ,KAJd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAFF,eAiBE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAjBF,EAmBG5B,MAAM,CAAC6B,mBAAP,IACC7B,MAAM,CAAC6B,mBAAP,CAA2BC,GAA3B,CAA+B,CAACC,UAAD,EAAaC,CAAb,kBAC7B,oBAAC,QAAD;AACE,IAAA,GAAG,EAAEA,CADP;AAEE,IAAA,WAAW,EAAED,UAFf;AAGE,IAAA,iBAAiB,EAAE,MAAMvB,oBAAoB,CAACuB,UAAU,CAACtB,EAAZ,CAH/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CApBJ,EA2BaT,MAAM,CAACyB,WAAP,IAAuBzB,MAAM,CAACyB,WAA9B,IAA6CzB,MAAM,CAACyB,WAAP,CAAmB,CAAnB,MAA0B,IAAvE,IAA+E,CAACvB,UAAhF,gBACT,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,cAAD;AAAgB,IAAA,QAAQ,EAAC,OAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADF,CADF,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAIF,MAAM,CAACyB,WAAP,IAAsBzB,MAAM,CAACyB,WAAP,CAAmBQ,cAA7C,CAJF,eAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAoBjC,MAAM,CAACyB,WAAP,IAAsBzB,MAAM,CAACyB,WAAP,CAAmBS,UAA7D,CAAH,CALF,CAJF,CADF,CADS,gBAgBT,yCA3CJ,CAFF,eAgDE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAhDF,CADF;AAoDD,CA1FD;;AA2FA,eAAenC,QAAf","sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport AccessTimeIcon from \"@material-ui/icons/AccessTime\";\nimport {BASE_URL} from '../../constants/urls'\nimport FeedCard from \"../../components/FeedCard/FeedCard\";\nimport { GlobalStateContext } from \"../../components/Global/GlobalStateContext\";\nimport { useNavigate } from \"react-router-dom\";\nimport Footer from \"../../components/Footer/Footer\";\nimport {\n  ConteinerInput,\n  PageContainer,\n  ConteinerNav,\n  SectionNavbar,\n  OrderActiveCtn,\n  OrderActive,\n  CtnTimer,\n  ColorWhite,\n} from \"./styled\";\nimport { InputAdornment, TextField } from \"@material-ui/core\";\nimport { Search } from \"@material-ui/icons\";\nimport Navbar from \"../../components/Navbar/Navbar\";\nimport Header from \"../../components/Header/Header\";\nimport { useProtectedPage } from \"../../hooks/useProtectedPage\";\n\nconst FeedPage = () => {\n  useProtectedPage();\n  const { states, sets } = useContext(GlobalStateContext);\n  const [errorOrder, setErrorOrder] = useState(\"\")\n  const navigate = useNavigate();\n  const [loading, setLoading] = useState(false)\n\n  const goToSearch = () => {\n    navigate(`/busca`);\n  };\n  const goToRestaurantDetail = (id) => {\n    sets.setFilteredRestaurants(states.restaurants);\n    navigate(`/restaurante/${id}`);\n  };\n\n  useEffect(() => {\n    setLoading(true)\n    sets.setFilteredRestaurants(states.restaurants);\n    getActiveOrder();\n    setLoading(false)\n  }, []);\n\nconst getActiveOrder = () => {\n    axios\n      .get(`${BASE_URL}/active-order`, {\n        headers: {\n          auth: localStorage.getItem(\"token\")\n        },\n      })\n      .then((res) => {\n        sets.setOrderStatus(res.data.order);\n        console.log(states.orderStatus)\n      })\n      .catch((err) => {\n        setErrorOrder(err)\n      });\n  };\n\n  return (\n    <div>\n      <Header />\n      <PageContainer>\n        \n        <ConteinerInput>\n          <TextField\n            variant=\"outlined\"\n            onClick={() => goToSearch(navigate)}\n            placeholder={\"  Restaurante\"}\n            InputProps={{\n              startAdornment: (\n                <InputAdornment position=\"start\">\n                  <Search />\n                </InputAdornment>\n              ),\n            }}\n          />\n        </ConteinerInput>\n\n        <Navbar />\n\n        {states.filteredRestaurants &&\n          states.filteredRestaurants.map((restaurant, i) => (\n            <FeedCard\n              key={i}\n              restaurants={restaurant}\n              onClickRestaurant={() => goToRestaurantDetail(restaurant.id)}\n            />\n          ))}\n                  {states.orderStatus  && states.orderStatus && states.orderStatus[0] !== null && !errorOrder ?  (\n          <OrderActiveCtn>\n            <OrderActive>\n              <CtnTimer>\n                <AccessTimeIcon fontSize=\"large\" />\n              </CtnTimer>\n              <div>\n                <ColorWhite>\n                  <p>Pedido em andamento</p>\n                </ColorWhite>\n                <p>{states.orderStatus && states.orderStatus.restaurantName}</p>\n                <p><strong>SUBTOTAL R${states.orderStatus && states.orderStatus.totalPrice}</strong></p>\n              </div>\n            </OrderActive>\n          </OrderActiveCtn>\n        ) : (\n          <></>\n        )}\n      </PageContainer>\n      <Footer />\n    </div>\n  );\n};\nexport default FeedPage;\n"]},"metadata":{},"sourceType":"module"}