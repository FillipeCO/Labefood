{"ast":null,"code":"import _objectSpread from\"/home/fillipecorreia/Desktop/LabeFood/Vaughan-labe-food5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/fillipecorreia/Desktop/LabeFood/Vaughan-labe-food5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import{BASE_URL}from\"../../constants/urls\";import{useEffect,useState,useContext}from\"react\";import Footer from\"../../components/Footer/Footer\";import Header from\"../../components/Header/Header\";import{useNavigate}from\"react-router-dom\";import{AddressContainer,RestaurantContainer,AdressContainer,CartContainer,ShippingText,SubtotalPrice,ButtonContainer,PaymentContainer,PlaceholderCtn,CardMargin}from\"./styled\";import{getProfile,getDetailRestaurant,sendOrder}from\"../../axiosRequests/user\";import{GlobalStateContext}from\"../../components/Global/GlobalStateContext\";import{FormControl,FormControlLabel,Radio,RadioGroup}from\"@material-ui/core\";import{Button,Checkbox}from\"@material-ui/core\";import{useRequestData}from\"../../hooks/useRequestData\";import CardFoodInCart from\"../../components/CardFoodInCart/CardFoodInCart\";import cartEmpty from\"../../assets/empty-cart.png\";import{useProtectedPage}from\"../../hooks/useProtectedPage\";var CartPage=function CartPage(){useProtectedPage();var _useState=useState({}),_useState2=_slicedToArray(_useState,2),address=_useState2[0],setAddress=_useState2[1];var _useContext=useContext(GlobalStateContext),states=_useContext.states,sets=_useContext.sets;var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),totalPrice=_useState4[0],setTotalPrice=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),product=_useState6[0],setProduct=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),payment=_useState8[0],setPayment=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),shipping=_useState10[0],setShipping=_useState10[1];var navigate=useNavigate();var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),restaurant=_useState12[0],setRestaurant=_useState12[1];var _useRequestData=useRequestData(\"\".concat(BASE_URL,\"/restaurants/\").concat(states.restaurantId)),_useRequestData2=_slicedToArray(_useRequestData,1),restaurantDetails=_useRequestData2[0];useEffect(function(){getProfile(setAddress);getDetailRestaurant(states.cart.idRestaurant,setRestaurant);},[]);var renderAddress=address.address?/*#__PURE__*/React.createElement(AddressContainer,null,/*#__PURE__*/React.createElement(\"p\",null,\"Endere\\xE7o de entrega:\"),/*#__PURE__*/React.createElement(\"span\",null,address.address)):/*#__PURE__*/React.createElement(AdressContainer,null,/*#__PURE__*/React.createElement(\"p\",null,\"Favor cadastrar um endere\\xE7oclicando\",\" \",/*#__PURE__*/React.createElement(\"strong\",{onClick:function onClick(){return navigate(\"/endereco\");}},\"aqui.\")));var listProductsInCart=states.cart&&states.cart.map(function(product){var toRemove=function toRemove(){var updateProductsInCart=states.cart&&states.cart.map(function(item){if(item.id===product.id){return _objectSpread(_objectSpread({},item),{},{quantity:item.quantity-1});}return item;}).filter(function(item){return item.quantity>0;});sets.setCart(updateProductsInCart);};return/*#__PURE__*/React.createElement(CardFoodInCart,{product:product,key:product.id,sendQuantity:product.quantity,onClickRemove:toRemove});});var body={products:states.cart,paymentMethod:payment};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(CartContainer,null,renderAddress,restaurantDetails&&restaurantDetails.restaurant&&/*#__PURE__*/React.createElement(RestaurantContainer,null,/*#__PURE__*/React.createElement(\"p\",null,restaurantDetails.restaurant.name),/*#__PURE__*/React.createElement(\"span\",null,restaurantDetails.restaurant.address),/*#__PURE__*/React.createElement(\"span\",null,restaurantDetails.restaurant.deliveryTime)),/*#__PURE__*/React.createElement(CardMargin,null,states.cart&&states.cart.length>0?listProductsInCart:/*#__PURE__*/React.createElement(PlaceholderCtn,null,/*#__PURE__*/React.createElement(\"h3\",null,\"O seu carrinho est\\xE1 vazio\"),/*#__PURE__*/React.createElement(\"img\",{src:cartEmpty,alt:\"Carrinho vazio\"}))),restaurantDetails&&restaurantDetails.restaurant&&/*#__PURE__*/React.createElement(ShippingText,null,/*#__PURE__*/React.createElement(\"p\",null,\"Frete: R$\",restaurantDetails.restaurant.shipping)),restaurantDetails&&restaurantDetails.restaurant&&states.cart&&states.cart.length>0&&/*#__PURE__*/React.createElement(SubtotalPrice,null,/*#__PURE__*/React.createElement(\"span\",null,\"Subtotal: R$\",states.cart.reduce(function(acc,item){return acc+item.price*item.quantity+Number(\"\".concat(restaurantDetails.restaurant.shipping));},0))),states.cart&&states.cart.length>0&&/*#__PURE__*/React.createElement(PaymentContainer,null,/*#__PURE__*/React.createElement(\"p\",null,\"Forma de pagamento\"),/*#__PURE__*/React.createElement(FormControl,{component:\"fieldset\"},/*#__PURE__*/React.createElement(RadioGroup,{\"aria-label\":\"payment\",name:\"payment\",value:payment,onChange:function onChange(e){return setPayment(e.target.value);}},/*#__PURE__*/React.createElement(FormControlLabel,{value:\"money\",control:/*#__PURE__*/React.createElement(Radio,null),label:\"Dinheiro\"}),/*#__PURE__*/React.createElement(FormControlLabel,{value:\"creditcard\",control:/*#__PURE__*/React.createElement(Radio,null),label:\"Cart\\xE3o\"})))),states.cart&&states.cart.length>0&&/*#__PURE__*/React.createElement(ButtonContainer,null,/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"primary\",fullWidth:true,style:{margin:\"10px\"},onClick:function onClick(){sendOrder(states.restaurantId,body,\"/home\");}},\"Confirmar\"))),/*#__PURE__*/React.createElement(Footer,null));};export default CartPage;","map":{"version":3,"sources":["/home/fillipecorreia/Desktop/LabeFood/Vaughan-labe-food5/src/pages/cartpage/CartPage.js"],"names":["React","BASE_URL","useEffect","useState","useContext","Footer","Header","useNavigate","AddressContainer","RestaurantContainer","AdressContainer","CartContainer","ShippingText","SubtotalPrice","ButtonContainer","PaymentContainer","PlaceholderCtn","CardMargin","getProfile","getDetailRestaurant","sendOrder","GlobalStateContext","FormControl","FormControlLabel","Radio","RadioGroup","Button","Checkbox","useRequestData","CardFoodInCart","cartEmpty","useProtectedPage","CartPage","address","setAddress","states","sets","totalPrice","setTotalPrice","product","setProduct","payment","setPayment","shipping","setShipping","navigate","restaurant","setRestaurant","restaurantId","restaurantDetails","cart","idRestaurant","renderAddress","listProductsInCart","map","toRemove","updateProductsInCart","item","id","quantity","filter","setCart","body","products","paymentMethod","name","deliveryTime","length","reduce","acc","price","Number","e","target","value","margin"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { BASE_URL } from \"../../constants/urls\";\nimport { useEffect, useState, useContext } from \"react\";\nimport Footer from \"../../components/Footer/Footer\";\nimport Header from \"../../components/Header/Header\";\nimport { useNavigate } from \"react-router-dom\";\nimport {\n  AddressContainer,\n  RestaurantContainer,\n  AdressContainer,\n  CartContainer,\n  ShippingText,\n  SubtotalPrice,\n  ButtonContainer,\n  PaymentContainer,\n  PlaceholderCtn,\n  CardMargin\n} from \"./styled\";\nimport {\n  getProfile,\n  getDetailRestaurant,\n  sendOrder,\n} from \"../../axiosRequests/user\";\nimport { GlobalStateContext } from \"../../components/Global/GlobalStateContext\";\nimport {\n  FormControl,\n  FormControlLabel,\n  Radio,\n  RadioGroup,\n} from \"@material-ui/core\";\nimport { Button, Checkbox } from \"@material-ui/core\";\nimport { useRequestData } from \"../../hooks/useRequestData\";\nimport CardFoodInCart from \"../../components/CardFoodInCart/CardFoodInCart\";\nimport cartEmpty from \"../../assets/empty-cart.png\";\nimport { useProtectedPage } from \"../../hooks/useProtectedPage\";\n\nconst CartPage = () => {\n  useProtectedPage();\n\n  const [address, setAddress] = useState({});\n  const { states, sets } = useContext(GlobalStateContext);\n  const [totalPrice, setTotalPrice] = useState(0);\n  const [product, setProduct] = useState([]);\n  const [payment, setPayment] = useState(\"\");\n  const [shipping, setShipping] = useState([]);\n  const navigate = useNavigate();\n  const [restaurant, setRestaurant] = useState([]);\n  const [restaurantDetails] = useRequestData(\n    `${BASE_URL}/restaurants/${states.restaurantId}`\n  );\n\n  useEffect(() => {\n    getProfile(setAddress);\n    getDetailRestaurant(states.cart.idRestaurant, setRestaurant);\n  }, []);\n\n  const renderAddress = address.address ? (\n    <AddressContainer>\n      <p>Endereço de entrega:</p>\n      <span>{address.address}</span>\n    </AddressContainer>\n  ) : (\n    <AdressContainer>\n      <p>\n        Favor cadastrar um endereçoclicando{\" \"}\n        <strong onClick={() => navigate(\"/endereco\")}>aqui.</strong>\n      </p>\n    </AdressContainer>\n  );\n\n  const listProductsInCart =\n    states.cart &&\n    states.cart.map((product) => {\n      const toRemove = () => {\n        const updateProductsInCart =\n          states.cart &&\n          states.cart\n            .map((item) => {\n              if (item.id === product.id) {\n                return {\n                  ...item,\n                  quantity: item.quantity - 1,\n                };\n              }\n              return item;\n            })\n            .filter((item) => {\n              return item.quantity > 0;\n            });\n\n        sets.setCart(updateProductsInCart);\n      };\n\n      return (\n        <CardFoodInCart\n          product={product}\n          key={product.id}\n          sendQuantity={product.quantity}\n          onClickRemove={toRemove}\n        />\n      );\n    });\n\n  const body = {\n    products: states.cart,\n    paymentMethod: payment,\n  };\n\n  return (\n    <>\n      <Header />\n      <CartContainer>\n        {renderAddress}\n\n        {restaurantDetails && restaurantDetails.restaurant && (\n          <RestaurantContainer>\n            <p>{restaurantDetails.restaurant.name}</p>\n            <span>{restaurantDetails.restaurant.address}</span>\n            <span>{restaurantDetails.restaurant.deliveryTime}</span>\n          </RestaurantContainer>\n        )}\n\n        <CardMargin>\n          {states.cart && states.cart.length > 0 ? (\n            listProductsInCart\n          ) : (\n            <PlaceholderCtn>\n              <h3>O seu carrinho está vazio</h3>\n              <img src={cartEmpty} alt=\"Carrinho vazio\" />\n            </PlaceholderCtn>\n          )}\n        </CardMargin>\n\n        {restaurantDetails && restaurantDetails.restaurant && (\n          <ShippingText>\n            <p>Frete: R${restaurantDetails.restaurant.shipping}</p>\n          </ShippingText>\n        )}\n\n        {restaurantDetails &&\n          restaurantDetails.restaurant &&\n          states.cart &&\n          states.cart.length > 0 && (\n            <SubtotalPrice>\n              <span>\n                Subtotal: R$\n                {states.cart.reduce((acc, item) => {\n                  return (\n                    acc +\n                    item.price * item.quantity +\n                    Number(`${restaurantDetails.restaurant.shipping}`)\n                  );\n                }, 0)}\n              </span>\n            </SubtotalPrice>\n          )}\n\n        {states.cart && states.cart.length > 0 && (\n          <PaymentContainer>\n            <p>Forma de pagamento</p>\n            <FormControl component=\"fieldset\">\n              <RadioGroup\n                aria-label=\"payment\"\n                name=\"payment\"\n                value={payment}\n                onChange={(e) => setPayment(e.target.value)}\n              >\n                <FormControlLabel\n                  value=\"money\"\n                  control={<Radio />}\n                  label=\"Dinheiro\"\n                />\n                <FormControlLabel\n                  value=\"creditcard\"\n                  control={<Radio />}\n                  label=\"Cartão\"\n                />\n              </RadioGroup>\n            </FormControl>\n          </PaymentContainer>\n        )}\n\n        {states.cart && states.cart.length > 0 && (\n          <ButtonContainer>\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              fullWidth\n              style={{ margin: \"10px\" }}\n              onClick={() => {\n                sendOrder(states.restaurantId, body, \"/home\");\n              }}\n            >\n              Confirmar\n            </Button>\n          </ButtonContainer>\n        )}\n      </CartContainer>\n      <Footer />\n    </>\n  );\n};\n\nexport default CartPage;\n"]},"metadata":{},"sourceType":"module"}