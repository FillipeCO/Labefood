{"ast":null,"code":"import _toConsumableArray from\"/home/fillipecorreia/Desktop/LabeFood/Vaughan-labe-food5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/home/fillipecorreia/Desktop/LabeFood/Vaughan-labe-food5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/fillipecorreia/Desktop/LabeFood/Vaughan-labe-food5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/home/fillipecorreia/Desktop/LabeFood/Vaughan-labe-food5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject(){var data=_taggedTemplateLiteral([\"\\ndisplay:flex;\\nalign-items:center;\\njustify-content:center;\\nbackground-color: #E86E5A;\\nposition: relative;\\ntop: -40px;\\nright: -160px;\\ncolor: #fff;\\npadding: 0.5rem;\\nheight: 10px;\\nwidth: 10px;\\nborder-radius: 50%;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React,{useState,useEffect}from\"react\";import CardFood from\"../../components/CardFood/CardFood\";import{BASE_URL}from\"../../constants/urls\";import{useRequestData}from\"../../hooks/useRequestData\";import{useParams}from\"react-router-dom\";import{useProtectedPage}from\"../../hooks/useProtectedPage\";import{GlobalStateContext}from\"../../components/Global/GlobalStateContext\";import{useContext}from\"react\";import Footer from\"../../components/Footer/Footer\";import CardRestaurant from\"../../components/CardRestaurant/CardRestaurant\";import CircularProgress from'@material-ui/core/CircularProgress';import{CentralizeLoading,RestaurantPageContainer}from'./styled';import styled from'styled-components';import Header from\"../../components/Header/Header\";var Badge=styled.div(_templateObject());var RestaurantPage=function RestaurantPage(){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),quantityProduct=_useState2[0],setQuantityProduct=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),productSelected=_useState4[0],setProdutcSelected=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showBadge=_useState6[0],setShowBadge=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),btn=_useState8[0],setBtn=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),category=_useState10[0],setCategory=_useState10[1];var _useContext=useContext(GlobalStateContext),states=_useContext.states,sets=_useContext.sets;var pathParams=useParams();var _useRequestData=useRequestData(\"\".concat(BASE_URL,\"/restaurants/\").concat(pathParams.id)),_useRequestData2=_slicedToArray(_useRequestData,3),foods=_useRequestData2[0],isLoadingFoods=_useRequestData2[1],errorFoods=_useRequestData2[2];useProtectedPage();useEffect(function(){sets.setOpenModal(false);{states.cart.length>0?setShowBadge(true):setShowBadge(false);}},[]);var onChangeQuantity=function onChangeQuantity(event){setQuantityProduct(event.target.value);};var AddProductToCart=function AddProductToCart(prod){if(states.restaurantId&&states.restaurantId!==pathParams.id){if(window.confirm(\"Quer modificar seu pedido? Lembre-se que você tem produtos adicionados na sua cesta. Deseja remover estes produtos e adicionar novos?\")){sets.setRestaurantId(\"\");sets.setCart([]);setProdutcSelected(prod);sets.setOpenModal(true);}}else{setProdutcSelected(prod);sets.setOpenModal(true);};};var addCart=function addCart(product,quantity){var quant=quantity;if(quant===0){quant=quant+1;}var foodItem=_objectSpread(_objectSpread({},product),{},{quantity:quant,btnValue:\"remover\",idRestaurant:Number(pathParams.id)});var newCart=[].concat(_toConsumableArray(states.cart),[foodItem]);sets.setCart(newCart);sets.setOpenModal(false);var foodItemBtn=_objectSpread(_objectSpread({},product),{},{quantity:quant,btnValue:\"remover\",idRestaurant:pathParams.id});var newBtn=[].concat(_toConsumableArray(btn),[foodItemBtn]);setBtn(newBtn);sets.setOpenModal(false);setShowBadge(true);sets.setRestaurantId(pathParams.id);};var listFoods=foods&&foods.restaurant&&foods.restaurant.products.map(function(product){var quantityOnCart=states.cart&&states.cart.map(function(cart){if(cart.id===product.id){return cart.quantity;}});var changeBtnValue=states.cart&&states.cart.map(function(cart){if(cart.id===product.id){return cart.btnValue;}});var toRemove=function toRemove(){var updateProductsInCart=states.cart&&states.cart.map(function(item){if(item.id===product.id){return _objectSpread(_objectSpread({},item),{},{quantity:item.quantity-1});}return item;}).filter(function(item){return item.quantity>0;});sets.setCart(updateProductsInCart);};return/*#__PURE__*/React.createElement(CardFood,{prodSelected:productSelected,product:product,key:product.id,restaurantId:pathParams.id,quantity:quantityProduct,sendQuantity:quantityOnCart,addCart:addCart,onChangeQuantity:onChangeQuantity,onClickAdd:function onClickAdd(){return AddProductToCart(product);},onClickRemove:toRemove,sendBtnChange:changeBtnValue,showBadge:showBadge});});return/*#__PURE__*/React.createElement(RestaurantPageContainer,null,/*#__PURE__*/React.createElement(Header,null),foods&&foods.restaurant&&/*#__PURE__*/React.createElement(CardRestaurant,{image:foods.restaurant.logoUrl,title:foods.restaurant.name,category:foods.restaurant.category,time:foods.restaurant.deliveryTime,shipping:foods.restaurant.shipping,address:foods.restaurant.address}),isLoadingFoods&&/*#__PURE__*/React.createElement(CentralizeLoading,null,/*#__PURE__*/React.createElement(CircularProgress,{color:\"primary\"})),!isLoadingFoods&&errorFoods&&/*#__PURE__*/React.createElement(\"p\",null,\"Erro\"),!isLoadingFoods&&foods&&listFoods,!isLoadingFoods&&foods&&listFoods.length===0&&/*#__PURE__*/React.createElement(\"p\",null,\"N\\xE3o h\\xE1 nenhuma postagem\"),/*#__PURE__*/React.createElement(Footer,null));};export default RestaurantPage;","map":{"version":3,"sources":["/home/fillipecorreia/Desktop/LabeFood/Vaughan-labe-food5/src/pages/restaurantpage/RestaurantPage.js"],"names":["React","useState","useEffect","CardFood","BASE_URL","useRequestData","useParams","useProtectedPage","GlobalStateContext","useContext","Footer","CardRestaurant","CircularProgress","CentralizeLoading","RestaurantPageContainer","styled","Header","Badge","div","RestaurantPage","quantityProduct","setQuantityProduct","productSelected","setProdutcSelected","showBadge","setShowBadge","btn","setBtn","category","setCategory","states","sets","pathParams","id","foods","isLoadingFoods","errorFoods","setOpenModal","cart","length","onChangeQuantity","event","target","value","AddProductToCart","prod","restaurantId","window","confirm","setRestaurantId","setCart","addCart","product","quantity","quant","foodItem","btnValue","idRestaurant","Number","newCart","foodItemBtn","newBtn","listFoods","restaurant","products","map","quantityOnCart","changeBtnValue","toRemove","updateProductsInCart","item","filter","logoUrl","name","deliveryTime","shipping","address"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport CardFood from \"../../components/CardFood/CardFood\";\nimport { BASE_URL } from \"../../constants/urls\";\nimport { useRequestData } from \"../../hooks/useRequestData\";\nimport { useParams } from \"react-router-dom\";\nimport {useProtectedPage} from \"../../hooks/useProtectedPage\"\nimport { GlobalStateContext } from \"../../components/Global/GlobalStateContext\";\nimport { useContext } from \"react\";\nimport Footer from \"../../components/Footer/Footer\";\nimport CardRestaurant from \"../../components/CardRestaurant/CardRestaurant\";\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport {CentralizeLoading, RestaurantPageContainer} from './styled'\nimport styled from 'styled-components';\nimport Header from \"../../components/Header/Header\";\n\nconst Badge = styled.div`\ndisplay:flex;\nalign-items:center;\njustify-content:center;\nbackground-color: #E86E5A;\nposition: relative;\ntop: -40px;\nright: -160px;\ncolor: #fff;\npadding: 0.5rem;\nheight: 10px;\nwidth: 10px;\nborder-radius: 50%;\n`\n\nconst RestaurantPage = () => {\n  const [quantityProduct , setQuantityProduct] = useState(0)\n  const [productSelected, setProdutcSelected] = useState({})\n  const [showBadge, setShowBadge] = useState(false);\n  const [btn, setBtn] = useState([]);\n  const [category, setCategory] = useState([]);\n\n  const { states, sets } = useContext(GlobalStateContext);\n  const pathParams = useParams();\n  const [foods, isLoadingFoods, errorFoods] = useRequestData(\n    `${BASE_URL}/restaurants/${pathParams.id}`\n  );\n   useProtectedPage();\n\n  useEffect(() => {\n    sets.setOpenModal(false);\n    {states.cart.length > 0 ? setShowBadge(true) : setShowBadge(false)}\n  }, []);\n\n  const onChangeQuantity = (event) => {\n    setQuantityProduct(event.target.value);\n  };\n\n  const AddProductToCart = (prod) => {\n    if(states.restaurantId && states.restaurantId !== pathParams.id){\n      if(window.confirm(\"Quer modificar seu pedido? Lembre-se que você tem produtos adicionados na sua cesta. Deseja remover estes produtos e adicionar novos?\")){\n        sets.setRestaurantId(\"\")\n        sets.setCart([])\n        setProdutcSelected(prod);\n        sets.setOpenModal(true);\n      }\n    }else{\n      setProdutcSelected(prod);\n      sets.setOpenModal(true);\n  };\n}\n\n  const addCart = (product, quantity) => {\n    let quant = quantity\n    if(quant === 0){\n       quant = quant + 1\n    }\n  \n    const foodItem = {\n      ...product,\n      quantity: quant,\n      btnValue: \"remover\",\n      idRestaurant: Number(pathParams.id),\n    };\n\n    const newCart = [...states.cart, foodItem];\n    sets.setCart(newCart);\n    sets.setOpenModal(false);\n    const foodItemBtn = {\n      ...product,\n      quantity: quant,\n      btnValue: \"remover\",\n      idRestaurant: pathParams.id,\n    };\n    const newBtn = [...btn, foodItemBtn];\n    setBtn(newBtn);\n    sets.setOpenModal(false)\n    setShowBadge(true)\n    sets.setRestaurantId(pathParams.id)\n  };\n\n\n  const listFoods =\n    foods &&\n    foods.restaurant &&\n    foods.restaurant.products.map(\n      (product) => {\n\n        const quantityOnCart = states.cart && states.cart.map((cart)=>{\n          if(cart.id === product.id){\n            return cart.quantity\n          }\n        });\n\n      const changeBtnValue =\n        states.cart &&\n        states.cart.map((cart) => {\n          if (cart.id === product.id) {\n            return cart.btnValue;\n          }\n        });\n\n      const toRemove = () => {\n        const updateProductsInCart =\n          states.cart &&\n          states.cart\n            .map((item) => {\n              if (item.id === product.id) {\n                return {\n                  ...item,\n                  quantity: item.quantity - 1,\n                };\n              }\n              return item;\n            })\n            .filter((item) => {\n              return item.quantity > 0;\n            });\n\n        sets.setCart(updateProductsInCart);\n\n      };\n\n      return (\n        <CardFood\n          prodSelected={productSelected}\n          product={product}\n          key={product.id}\n          restaurantId={pathParams.id}\n          quantity={quantityProduct}\n          sendQuantity={quantityOnCart}\n          addCart={addCart}\n          onChangeQuantity={onChangeQuantity}\n          onClickAdd={() => AddProductToCart(product)}\n          onClickRemove={toRemove}\n          sendBtnChange={changeBtnValue}\n          showBadge={showBadge}\n        />\n      );\n    });\n  return (\n    <RestaurantPageContainer>\n      <Header />\n\n      {foods && foods.restaurant && (\n        <CardRestaurant\n          image={foods.restaurant.logoUrl}\n          title={foods.restaurant.name}\n          category={foods.restaurant.category}\n          time={foods.restaurant.deliveryTime}\n          shipping={foods.restaurant.shipping}\n          address={foods.restaurant.address}\n        />\n      )}\n\n      {isLoadingFoods &&  <CentralizeLoading><CircularProgress color=\"primary\" /></CentralizeLoading>}\n      {!isLoadingFoods && errorFoods && <p>Erro</p>}\n      {!isLoadingFoods && foods && listFoods}\n      {!isLoadingFoods && foods && listFoods.length === 0 && (\n        <p>Não há nenhuma postagem</p>\n      )}\n      <Footer />\n    </RestaurantPageContainer>\n  );\n};\n\nexport default RestaurantPage\n"]},"metadata":{},"sourceType":"module"}